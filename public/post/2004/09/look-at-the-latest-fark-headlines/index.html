<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.60856f0f2ed73fb3cd2820ee548c4698ffbc4d743736e852c0e27ce4f52dfd9c.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  

<meta property="og:url" content="https://randomgeekery.org/post/2004/09/look-at-the-latest-fark-headlines/">
<meta property="og:title" content="Look at the Latest Fark Headlines">
<meta name="twitter:title" content="Look at the Latest Fark Headlines">


  <meta name="twitter:site" content="@brianwisti">



  
    <meta name="twitter:description" content="The Problem I want to look at the Fark headlines without opening a browser. Why? I dunno, maybe I just want to see what’s new since the last time I looked, without being distracted by the site clutter.
Now, I could just turn off images and go to the site, and that would work fine. Actually, it would work quite well. No need for this article, then. I’m off for some coffee …">
    <meta property="og:description" content="The Problem I want to look at the Fark headlines without opening a browser. Why? I dunno, maybe I just want to see what’s new since the last time I looked, without being distracted by the site clutter.
Now, I could just turn off images and go to the site, and that would work fine. Actually, it would work quite well. No need for this article, then. I’m off for some coffee …">
  



<title itemprop="name">Look at the Latest Fark Headlines - Random Geekery</title>
<meta property="og:title" content=Look&#32;at&#32;the&#32;Latest&#32;Fark&#32;Headlines&#32;-&#32;Random&#32;Geekery />
<meta name="twitter:title" content=Look&#32;at&#32;the&#32;Latest&#32;Fark&#32;Headlines&#32;-&#32;Random&#32;Geekery />
<meta itemprop="name" content=Look&#32;at&#32;the&#32;Latest&#32;Fark&#32;Headlines&#32;-&#32;Random&#32;Geekery />
<meta name="application-name" content=Look&#32;at&#32;the&#32;Latest&#32;Fark&#32;Headlines&#32;-&#32;Random&#32;Geekery />
<meta property="og:site_name" content="Random Geekery" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="https://randomgeekery.org/post/2004/09/look-at-the-latest-fark-headlines/" />
<link rel="canonical" href="https://randomgeekery.org/post/2004/09/look-at-the-latest-fark-headlines/" itemprop="url" />
<meta name="url" content="https://randomgeekery.org/post/2004/09/look-at-the-latest-fark-headlines/" />
<meta name="twitter:url" content="https://randomgeekery.org/post/2004/09/look-at-the-latest-fark-headlines/" />
<meta property="og:url" content="https://randomgeekery.org/post/2004/09/look-at-the-latest-fark-headlines/" />


<meta property="og:updated_time" content=17009-17-12T90:00:04-0700 />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://randomgeekery.org/sitemap.xml' />

  <link
      rel="alternate"
      type="application/rss+xml"
    
        href="/index.xml"
    
      title="Random Geekery"/>



<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Random Geekery" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.121.2">


    
    

<link
    rel="stylesheet"
    href="/css/style.15361b4c24f30033251cd8947e34c41e754c9461dc117cab390ac04e365faec3.css"
    integrity="sha256-FTYbTCTzADMlHNiUfjTEHnVMlGHcEXyrOQrATjZfrsM=" 
    crossorigin="anonymous">


</head>

    <body class="">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="https://randomgeekery.org">
                <h1>Random Geekery</h1>
            </a>
        
    </h1>
    <p class="lead">
    Collecting my attempts to improve at tech, art, and life
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
      
        <li class="bullet">
          <a href="/follow/">Follow</a>
        </li>
      
        <li class="bullet">
          <a href="/now/">Now</a>
        </li>
      
    </ul>
</nav>

        
  <div class="related">
    <div class="related-posts">
      <h3>Related</h3>
      <ul>
        
          <li><a href="/post/2004/10/drawing-celtic-knotwork/">Drawing Celtic Knotwork</a></li>
        
          <li><a href="/post/2003/06/ruby-babysteps-01-first-steps/">Ruby Babysteps 01 - First Steps</a></li>
        
          <li><a href="/post/2004/12/rebol-babysteps-01-getting-started/">REBOL Babysteps - 01 Getting Started</a></li>
        
          <li><a href="/post/2004/12/rebol-babysteps-02-getting-started-with-view/">REBOL Babysteps - 02 Getting Started With View</a></li>
        
          <li><a href="/post/2004/12/rebol-babysteps/">REBOL Babysteps</a></li>
        
      </ul>
    </div>
  </div>



        
















        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Brian Wisti. All rights reserved.
</p>
<p class="footnote">
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License
  </a>.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <nav class="masthead">
    <ul>
    
  
    
  
    
  

    <li><a href="https://randomgeekery.org/">Random Geekery</a></li>
  

    <li><a href="https://randomgeekery.org/post/">Posts</a></li>
  

    <li><a class="active" href="https://randomgeekery.org/post/2004/09/look-at-the-latest-fark-headlines/">Look at the Latest Fark Headlines</a></li>
</nav>



  <div class="info">
    <h1 class="post-title">
        <a href="https://randomgeekery.org/post/2004/09/look-at-the-latest-fark-headlines/">Look at the Latest Fark Headlines</a>
    </h1>
    
        <time datetime="2004-09-17T00:00:00-0700" class="post-date">
            September 17, 2004
        </time>
    
    
    <ul class="tags">
        
        <li class="tag-ruby">
            <a href="https://randomgeekery.org/tags/ruby">ruby</a>
        </li>
        
        <li class="tag-learn">
            <a href="https://randomgeekery.org/tags/learn">learn</a>
        </li>
        
        <li class="tag-coolnamehere">
            <a href="https://randomgeekery.org/tags/coolnamehere">coolnamehere</a>
        </li>
        
    </ul>
    
    
    
    
    
    
</div>

  <h2 id="the-problem">The Problem</h2>
<p>I want to look at the <a href="http://fark.com/">Fark</a> headlines without opening a browser. Why? I dunno, maybe I just want to see what’s new since the last time I looked, without being distracted by the site clutter.</p>
<p>Now, I could just turn off images and go to the site, and that would work fine. Actually, it would work quite well. No need for this article, then. I’m off for some coffee …</p>
<p>What? I <em>have</em> to write something in here about <a href="/card/ruby/">Ruby</a>? … okay.</p>
<p>ahem.</p>
<p>I want to look at the <a href="http://fark.com/">Fark</a> headlines without opening a browser. Why? Well, as it so happens, I am logged into a machine via <code>ssh</code>, and using <code>elinks</code> to load the page will result in a lot of extra clutter from text versions of ads which obscure the headlines. I’m just interested in seeing what interesting, scary, or amusing things have been posted on Fark since the last time I checked.</p>
<h2 id="finding-a-solution">Finding a Solution</h2>
<p>Well, we could always just dump the Fark page to the console:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">headlines</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;http://www.fark.com/&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nb">puts</span> <span class="n">headlines</span>
</span></span></code></pre></div><p>Three lines of code and we have output.</p>
<pre tabindex="0"><code>$ ruby19 fark.rb
⋮
&lt;!-- START copyright_html() --&gt;
&lt;div id=&#34;footer&#34;&gt;
&lt;span class=&#34;boldy&#34;&gt;&lt;a target=&#34;_top&#34; href=&#34;http://www.fark.com/nomirror/&#34;&gt;&lt;/a&gt;\
Copyright &amp;copy; 1999-2009 Fark, Inc&lt;/span&gt;&lt;br&gt;
&lt;strong&gt;Last updated: Mon Mar  9 16:28:19 2009&lt;/strong&gt;&lt;br&gt;
&lt;a target=&#34;_top&#34; href=&#34;http://www.fark.com/cgi/feedback.pl&#34;&gt;Contact us&lt;/a&gt; | &lt;\
a target=&#34;_top&#34; href=&#34;http://www.fark.com/cgi/feedback.pl?type=error&#34;&gt;Report a\
bug/error msg&lt;/a&gt;&lt;br&gt;
&lt;a target=&#34;_top&#34; href=&#34;http://www.fark.com/farq/legal.shtml&#34;&gt;Terms of service/\
legal/privacy policy&lt;/a&gt;
&lt;br&gt;
&lt;div class=&#34;finalfootnote&#34;&gt;&lt;script type=&#34;text/javascript&#34;&gt;
//&lt;![CDATA[
document.write(&#39;&lt;&#39;+&#39;img src=&#34;http://www.fark.com/cgi/ll.pl?l=H384ABPoSz-uDukni\
hQDAVhlkEgde6Pxu7ZO_uxPBp5SfD&amp;amp;v=&#39;); var fw=(window.innerWidth) ? window.in\
nerWidth : document.body.offsetWidth; var fh=(window.innerHeight) ? window.inn\
erHeight : document.body.offsetHeight; var fc=window.screen.colorDepth; docume\
nt.writeln(((fh*8192)+fw)+&#39;&amp;amp;c=&#39;+fc+&#39;&#34; width=&#34;4&#34; height=&#34;1&#34; alt=&#34;&#34;&#39;+&#39;&gt;&#39;);
//]]&gt;&lt;/script&gt;&lt;noscript&gt;&lt;img src=&#34;http://www.fark.com/cgi/ll.pl?l=H384ABPoSz-u\
DuknihQDAVhlkEgde6Pxu7ZO_uxPBp5SfD&amp;amp;v=0&#34; width=&#34;4&#34; height=&#34;1&#34; alt=&#34;&#34;&gt;&lt;/nosc\
ript&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;!-- END copyright_html() --&gt;
&lt;/div&gt; &lt;!-- siteContainer --&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p>But running this doesn’t quite get the result I was looking for. I just want the headlines, and I want them without the HTML, thank you very much.</p>
<p>Fark and a lot of other news sites make <a href="https://blogging.im/RSS">RSS</a> feeds available. These are special XML files containing mainly — you guessed it, the headlines, without the HTML, you’re very welcome.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;http://www.fark.com/fark.rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">headlines</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nb">puts</span> <span class="n">headlines</span>
</span></span></code></pre></div><p>This is a little closer to what we want.</p>
<pre tabindex="0"><code>$ ruby fark.rb
⋮
&lt;item&gt;
 &lt;title&gt;&amp;#34;Hindsight isn&amp;#39;t only 20/20, it&amp;#39;s usually also sober&amp;#34; [Dumbass]&lt;/title&gt;
 &lt;description&gt;&lt;![CDATA[Atlanta Journal Constitution]]&gt;&lt;/description&gt;
 &lt;link&gt;http://www.fark.com/cgi/comments.pl?IDLink=4255950&lt;/link&gt;
 &lt;pubDate&gt;Mon, 09 Mar 2009 02:05:43 EDT&lt;/pubDate&gt;
 &lt;guid isPermaLink=&#34;false&#34;&gt;http://www.fark.com/cgi/go.pl?i=4255950&lt;/guid&gt;
&lt;/item&gt;
&lt;/channel&gt;
&lt;/rss&gt;
</code></pre><p>Now I get the RSS file dumped to the console. At least the story headlines are little easier to find. To get the behavior I want, though, we’re going to need to chop out the bits we don’t care about and get straight to the headlines. This task is straightforward in Ruby, thanks to the <a href="http://ruby-doc.org/stdlib/libdoc/rss/rdoc/index.html">RSS</a> library. The RSS library has recently been made an official part of the standard libs, which makes a lot of this exercise much easier.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;rss&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rss_url</span> <span class="o">=</span> <span class="s1">&#39;http://www.fark.com/fark.rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">document</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">rss_url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span> <span class="o">=</span> <span class="no">RSS</span><span class="o">::</span><span class="no">Parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="nb">puts</span> <span class="n">item</span><span class="o">.</span><span class="n">title</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span></code></pre></div><p>Okay, now what does this look like?</p>
<pre tabindex="0"><code>$ ruby19 fark.rb
Worried about being the washed-up former high school football star while \
those nerds you picked on become millionaires later in life? Well, good n\
ews [Interesting]
State mental hospital drops off severely ill woman at bus station to make\
it home by herself. Since this is Fark, you can assume she didn&#39;t make it\
[Sad]
Professional coffee taster&#39;s tongue insured for $14 million. The man&#39;s to\
ngue works magic on the bean [Amusing]
In celebration of his 69th birthday tomorrow, Chuck Norris will randomly \
select one lucky child to be thrown into the sun [Hero]
Moving pot plants to an undisclosed location to deter would-be burglars i\
s a GREAT idea. Just don&#39;t do it using an open-bed pickup truck. Police m\
ight see you [Florida]
Nothing solves an $8 billion dollar deficit like a good old fashioned bak\
e sale [Stupid]
Yet another indicator of America&#39;s continuing decline: pediatricians now \
recommend that children between the ages of 2 and 10 be routinely screene\
d for heart disease [Sad]
Computer glitch caused Austrailian airliner to plunge 1,000 feet and the \
toilets to flush counterclockwise [Scary]
This year&#39;s Maxwell Smart Special Achievement Award goes to the US Triden\
t missile program, for keeping the composition of a key material so secre\
t that no one knows how to make it anymore [Fail]
Unique portrait of William Shakespeare reveals much about the notorious b\
ard, such as the stunning realization that he looks like Russell Brand [I\
nteresting]
Just what the filthy rich need -- a place to super-poke their filthy rich\
friends [Dumbass]
Man/Boy love group NAMBLA puts $10,000 hit on New York&#39;s Attorney General\
; because decades in jail is so worth $10G [Asinine]
Christian salt, contraceptive robberies, and a wallet full of teeth: Fark\
&#39;s Headlines of the Week 3/1 to 3/7 [FarkBlog]
⋮
</code></pre><p>This is even better still, but that’s an awful lot of headlines. How about just the most recent ones? How about the last 10?</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;rss&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rss_url</span> <span class="o">=</span> <span class="s1">&#39;http://www.fark.com/fark.rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">limit</span> <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">document</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">rss_url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span> <span class="o">=</span> <span class="no">RSS</span><span class="o">::</span><span class="no">Parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="k">break</span> <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">limit</span>
</span></span><span class="line"><span class="cl">  <span class="nb">puts</span> <span class="n">item</span><span class="o">.</span><span class="n">title</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span></code></pre></div><p>What does it look like now?</p>
<pre tabindex="0"><code>$ ruby19 fark.rb
Today&#39;s moral outrage comes from Geneva, Switzerland, where a known prostitut\
e activist was buried in the same cemetery as John Calvin [Strange]
Meghan McCain calls Ann Coulter &#34;offensive&#34; and &#34;insulting,&#34; adding &#34;are you \
going to finish those fries?&#34; [Interesting]
Worried about being the washed-up former high school football star while thos\
e nerds you picked on become millionaires later in life? Well, good news [Int\
eresting]
State mental hospital drops off severely ill woman at bus station to make it \
home by herself. Since this is Fark, you can assume she didn&#39;t make it [Sad]
Professional coffee taster&#39;s tongue insured for $14 million. The man&#39;s tongue\
works magic on the bean [Amusing]
In celebration of his 69th birthday tomorrow, Chuck Norris will randomly sele\
ct one lucky child to be thrown into the sun [Hero]
Moving pot plants to an undisclosed location to deter would-be burglars is a \
GREAT idea. Just don&#39;t do it using an open-bed pickup truck. Police might see\
you [Florida]
Nothing solves an $8 billion dollar deficit like a good old fashioned bake sa\
le [Stupid]
Yet another indicator of America&#39;s continuing decline: pediatricians now reco\
mmend that children between the ages of 2 and 10 be routinely screened for he\
art disease [Sad]
Computer glitch caused Austrailian airliner to plunge 1,000 feet and the toil\
ets to flush counterclockwise [Scary]
</code></pre><p>Now we’ve got it down to the freshest 10, but each item is still filling up a lot of space. One way to cut down the length of each line is to split each headline into multiple lines. Let’s start by cutting the category and title into two separate lines:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;rss&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rss_url</span>       <span class="o">=</span> <span class="s1">&#39;http://www.fark.com/fark.rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">limit</span>         <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="n">title_pattern</span> <span class="o">=</span> <span class="no">Regexp</span><span class="o">.</span><span class="n">new</span> <span class="sr">%r{\[(.+?)\]\s(.+)$}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">document</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">rss_url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span> <span class="o">=</span> <span class="no">RSS</span><span class="o">::</span><span class="no">Parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="k">break</span> <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">limit</span>
</span></span><span class="line"><span class="cl">  <span class="n">title_match</span> <span class="o">=</span> <span class="n">title_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="n">title_match</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="nb">puts</span> <span class="n">title_match</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">upcase</span><span class="p">,</span> <span class="n">title_match</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span></code></pre></div><p>It’s a lot easier for me to read the output now.</p>
<pre tabindex="0"><code>$ ruby19 fark.rb
INTERESTING
Research shows that older fathers tends to has more kids who is dumb
FLORIDA
If you want to avoid suspicion of driving under the influence, the first \
step would be to make sure you&#39;re driving on a full set of tires
INTERESTING
Vatican claims washing machine is most liberating 20th century invention \
for women. Sybian didn&#39;t even make the list
STRANGE
Today&#39;s moral outrage comes from Geneva, Switzerland, where a known prost\
itute activist was buried in the same cemetery as John Calvin
INTERESTING
Meghan McCain calls Ann Coulter &#34;offensive&#34; and &#34;insulting,&#34; adding &#34;are \
you going to finish those fries?&#34;
INTERESTING
Worried about being the washed-up former high school football star while \
those nerds you picked on become millionaires later in life? Well, good n\
ews
SAD
State mental hospital drops off severely ill woman at bus station to make\
it home by herself. Since this is Fark, you can assume she didn&#39;t make it
AMUSING
Professional coffee taster&#39;s tongue insured for $14 million. The man&#39;s to\
ngue works magic on the bean
HERO
In celebration of his 69th birthday tomorrow, Chuck Norris will randomly \
select one lucky child to be thrown into the sun
FLORIDA
Moving pot plants to an undisclosed location to deter would-be burglars i\
s a GREAT idea. Just don&#39;t do it using an open-bed pickup truck. Police m\
ight see you
</code></pre><p>Occasionally I saw HTML entities in the output. <code>&amp;quot;</code>, stuff like that. Let’s fix that problem before we move on to anything else.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;cgi&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rss_url</span>       <span class="o">=</span> <span class="s1">&#39;http://www.fark.com/fark.rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">limit</span>         <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="n">title_pattern</span> <span class="o">=</span> <span class="no">Regexp</span><span class="o">.</span><span class="n">new</span> <span class="sr">%r{\[(.+?)\]\s(.+)$}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">document</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">rss_url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span> <span class="o">=</span> <span class="no">RSS</span><span class="o">::</span><span class="no">Parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="k">break</span> <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">limit</span>
</span></span><span class="line"><span class="cl">  <span class="n">title_match</span> <span class="o">=</span> <span class="n">title_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="n">title_match</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="n">category</span> <span class="o">=</span> <span class="no">CGI</span><span class="o">::</span><span class="n">unescapeHTML</span><span class="p">(</span><span class="n">title_match</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">upcase</span>
</span></span><span class="line"><span class="cl">    <span class="n">title</span>    <span class="o">=</span> <span class="no">CGI</span><span class="o">::</span><span class="n">unescapeHTML</span><span class="p">(</span><span class="n">title_match</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">puts</span> <span class="n">category</span><span class="p">,</span> <span class="n">title</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span></code></pre></div><p>It isn’t an issue this time, but I feel better.</p>
<pre tabindex="0"><code>$ ruby19 fark.rb
INTERESTING
Research shows that older fathers tends to has more kids who is dumb
FLORIDA
If you want to avoid suspicion of driving under the influence, the first \
step would be to make sure you&#39;re driving on a full set of tires
INTERESTING
Vatican claims washing machine is most liberating 20th century invention \
for women. Sybian didn&#39;t even make the list
STRANGE
Today&#39;s moral outrage comes from Geneva, Switzerland, where a known prost\
itute activist was buried in the same cemetery as John Calvin
INTERESTING
Meghan McCain calls Ann Coulter &#34;offensive&#34; and &#34;insulting,&#34; adding &#34;are \
you going to finish those fries?&#34;
INTERESTING
Worried about being the washed-up former high school football star while \
those nerds you picked on become millionaires later in life? Well, good n\
ews
SAD
State mental hospital drops off severely ill woman at bus station to make\
it home by herself. Since this is Fark, you can assume she didn&#39;t make it
AMUSING
Professional coffee taster&#39;s tongue insured for $14 million. The man&#39;s to\
ngue works magic on the bean
HERO
In celebration of his 69th birthday tomorrow, Chuck Norris will randomly \
select one lucky child to be thrown into the sun
FLORIDA
Moving pot plants to an undisclosed location to deter would-be burglars i\
s a GREAT idea. Just don&#39;t do it using an open-bed pickup truck. Police m\
ight see you
</code></pre><p>Wherever possible, I’m using standard library tools to get my work done. I’m too lazy to remember escaping every possible HTML entity, and I would rather spend a few minutes searching through the <a href="http://www.ruby-doc.org/stdlib/">Standard Library documentation</a> to find what I need. It’s a good habit, and you might want to try it yourself.</p>
<p>Maybe I only care about particular types of headline. Say, I want to be interested, but not amused.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;cgi&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rss_url</span>            <span class="o">=</span> <span class="s1">&#39;http://www.fark.com/fark.rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">limit</span>              <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="n">title_pattern</span>      <span class="o">=</span> <span class="no">Regexp</span><span class="o">.</span><span class="n">new</span> <span class="sr">%r{\[(.+?)\]\s(.+)$}</span>
</span></span><span class="line"><span class="cl"><span class="n">preferred_category</span> <span class="o">=</span> <span class="s1">&#39;INTERESTING&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">document</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">rss_url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span> <span class="o">=</span> <span class="no">RSS</span><span class="o">::</span><span class="no">Parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="k">break</span> <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">limit</span>
</span></span><span class="line"><span class="cl">  <span class="n">title_match</span> <span class="o">=</span> <span class="n">title_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="n">title_match</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="n">category</span> <span class="o">=</span> <span class="no">CGI</span><span class="o">::</span><span class="n">unescapeHTML</span><span class="p">(</span><span class="n">title_match</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">upcase</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="n">preferred_category</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">      <span class="n">title</span> <span class="o">=</span> <span class="no">CGI</span><span class="o">::</span><span class="n">unescapeHTML</span><span class="p">(</span><span class="n">title_match</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">puts</span> <span class="n">title</span>
</span></span><span class="line"><span class="cl">    <span class="k">end</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span></code></pre></div><p>And it does indeed show me only &ldquo;interesting&rdquo; headlines.</p>
<pre tabindex="0"><code>$ ruby19 fark.rb
New study concludes that viewing television before age 2 has no negative \
effect on development. Great - NOW who are we supposed to blame for rampa\
nt toddler sex and violence??
Research shows that older fathers tends to has more kids who is dumb
Vatican claims washing machine is most liberating 20th century invention \
for women. Sybian didn&#39;t even make the list
Meghan McCain calls Ann Coulter &#34;offensive&#34; and &#34;insulting,&#34; adding &#34;are \
you going to finish those fries?&#34;
Worried about being the washed-up former high school football star while \
those nerds you picked on become millionaires later in life? Well, good n\
ews
</code></pre><p>That’s pretty nifty, except that it only looks for Interesting items out of the last 10 headlines, rather than looking for the last 10 Interesting headlines.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;cgi&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rss_url</span>            <span class="o">=</span> <span class="s1">&#39;http://www.fark.com/fark.rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">limit</span>              <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="n">title_pattern</span>      <span class="o">=</span> <span class="no">Regexp</span><span class="o">.</span><span class="n">new</span> <span class="sr">%r{\[(.+?)\]\s(.+)$}</span>
</span></span><span class="line"><span class="cl"><span class="n">preferred_category</span> <span class="o">=</span> <span class="s1">&#39;Interesting&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">document</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">rss_url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span> <span class="o">=</span> <span class="no">RSS</span><span class="o">::</span><span class="no">Parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="n">title_match</span> <span class="o">=</span> <span class="n">title_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="n">title_match</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="n">category</span> <span class="o">=</span> <span class="no">CGI</span><span class="o">::</span><span class="n">unescapeHTML</span><span class="p">(</span><span class="n">title_match</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">category</span><span class="o">.</span><span class="n">upcase</span> <span class="o">==</span> <span class="n">preferred_category</span><span class="o">.</span><span class="n">upcase</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">      <span class="n">title</span> <span class="o">=</span> <span class="no">CGI</span><span class="o">::</span><span class="n">unescapeHTML</span><span class="p">(</span><span class="n">title_match</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nb">puts</span> <span class="n">title</span>
</span></span><span class="line"><span class="cl">      <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">      <span class="k">break</span> <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">limit</span>
</span></span><span class="line"><span class="cl">    <span class="k">end</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span></code></pre></div><p>Is this any better?</p>
<pre tabindex="0"><code>$ ruby19 fark.rb
New study concludes that viewing television before age 2 has no negative \
effect on development. Great - NOW who are we supposed to blame for rampa\
nt toddler sex and violence??
Research shows that older fathers tends to has more kids who is dumb
Vatican claims washing machine is most liberating 20th century invention \
for women. Sybian didn&#39;t even make the list
Meghan McCain calls Ann Coulter &#34;offensive&#34; and &#34;insulting,&#34; adding &#34;are \
you going to finish those fries?&#34;
Worried about being the washed-up former high school football star while \
those nerds you picked on become millionaires later in life? Well, good n\
ews
</code></pre><p>Well, we can only look at today’s headlines. I guess we can’t be sure of ten interesting things happening every day. Still, at least I know I’m getting all of the interesting headlines that are available, up to my limit.</p>
<p>Next problem: the only way I can fetch different headline types is to manually dig in to the source code and change the category.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;open-uri&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;cgi&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;optparse&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rss_url</span>            <span class="o">=</span> <span class="s1">&#39;http://www.fark.com/fark.rss&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">limit</span>              <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="n">title_pattern</span>      <span class="o">=</span> <span class="no">Regexp</span><span class="o">.</span><span class="n">new</span> <span class="sr">%r{(.+)\s\[(.+)\]$}</span>
</span></span><span class="line"><span class="cl"><span class="n">preferred_category</span> <span class="o">=</span> <span class="kp">nil</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Get the preferred category, if any, from the command line.</span>
</span></span><span class="line"><span class="cl"><span class="n">opts</span> <span class="o">=</span> <span class="no">OptionParser</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">opts</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="n">opts</span><span class="o">.</span><span class="n">banner</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="vg">$0</span><span class="si">}</span><span class="s2"> [options]&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="n">opts</span><span class="o">.</span><span class="n">separator</span><span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">opts</span><span class="o">.</span><span class="n">separator</span><span class="p">(</span><span class="s2">&#34;Specific Options&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">opts</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">&#34;-c&#34;</span><span class="p">,</span> <span class="s2">&#34;--category CATEGORY&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;Only grab headlines in specific category&#34;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">cat</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">    <span class="n">preferred_category</span> <span class="o">=</span> <span class="n">cat</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">opts</span><span class="o">.</span><span class="n">on_tail</span><span class="p">(</span><span class="s2">&#34;-h&#34;</span><span class="p">,</span> <span class="s2">&#34;--help&#34;</span><span class="p">,</span> <span class="s2">&#34;Show this usage display&#34;</span><span class="p">)</span> <span class="k">do</span>
</span></span><span class="line"><span class="cl">    <span class="nb">puts</span> <span class="n">opts</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">opts</span><span class="o">.</span><span class="n">parse!</span><span class="p">(</span><span class="no">ARGV</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">document</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">rss_url</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span> <span class="o">=</span> <span class="no">RSS</span><span class="o">::</span><span class="no">Parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">document</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="n">rss</span><span class="o">.</span><span class="n">items</span><span class="o">.</span><span class="n">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">item</span><span class="p">,</span> <span class="n">index</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="k">break</span> <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">limit</span>
</span></span><span class="line"><span class="cl">  <span class="n">title_match</span> <span class="o">=</span> <span class="n">title_pattern</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="n">title_match</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">    <span class="n">category</span> <span class="o">=</span> <span class="no">CGI</span><span class="o">::</span><span class="n">unescapeHTML</span><span class="p">(</span><span class="n">title_match</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">preferred_category</span><span class="o">.</span><span class="n">nil?</span>
</span></span><span class="line"><span class="cl">      <span class="nb">puts</span> <span class="n">title</span><span class="p">,</span> <span class="n">category</span>
</span></span><span class="line"><span class="cl">    <span class="k">elsif</span> <span class="n">category</span><span class="o">.</span><span class="n">upcase</span> <span class="o">==</span> <span class="n">preferred_category</span><span class="o">.</span><span class="n">upcase</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">      <span class="nb">puts</span> <span class="n">title</span>
</span></span><span class="line"><span class="cl">      <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">      <span class="k">break</span> <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">limit</span>
</span></span><span class="line"><span class="cl">    <span class="k">end</span>
</span></span><span class="line"><span class="cl">  <span class="k">end</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span></code></pre></div><p>Let’s test it by requesting &ldquo;PSA&rdquo; headlines.</p>
<pre tabindex="0"><code>$ ruby19 fark.rb -c psa

Attention zoo visitors - please do not taunt the concrete chimpanzee
</code></pre><p>That works. Pretty nicely, I might add. <a href="http://www.ruby-doc.org/stdlib/libdoc/optparse/rdoc/">OptParse</a> is a great library for handling command-line arguments.</p>
<p>This program now does everything that I set out to do, and then some. I might choose to do a some refactoring to &ldquo;bulletproof&rdquo; the code, or wrap it up in some OO niceness to make it pretty. The truth is that this application is exactly what it needs to be for now, and I think that I shouldn’t overwork something that I may never come back to. Maybe later I’ll come back to it when I think of new features or find new bugs, and <em>then</em> I can overwork it to my heart’s content.</p>
<p>I hope you enjoyed working along with me as much as I enjoyed sitting here and typing random nonsense to myself.</p>
<h2 id="what-else">What Else?</h2>
<p>I may be done with this exercise for now, but here are a few ideas about features that can be added to make it a little cooler. Go ahead and try them out!</p>
<ul>
<li>Add word wrap to make the output a little more readable.</li>
<li>Add a parameter to change the number of headlines grabbed.</li>
<li>Modify so that this script will work with other newsfeeds.</li>
<li>Modify so that the functionality of this script can be embedded in other Ruby programs.</li>
</ul>

  




  <section class="backlinks">
    <h2>Backlinks</h2>
    <nav>
      <ul>
      
      <li>
        <a href="/post/2004/09/the-mires/">the-mires</a>
      </li>
      
      </ul>
    </nav>
  </section>



  <hr>
  

  
  
<hr>
<div class="footer">
    
    
      <a class="previous-post" href="https://randomgeekery.org/post/2004/09/the-mires/?ref=footer">
        <span style="font-weight:bold;">« Previous</span>
        <br>The MIRES
      </a>
    
    
      <div class="next-post">
        <a href="https://randomgeekery.org/post/2004/10/drawing-celtic-knotwork/?ref=footer">
          <span style="font-weight:bold;">Next »</span>
          <br>Drawing Celtic Knotwork
        </a>
      </div>
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#the-problem">The Problem</a></li>
    <li><a href="#finding-a-solution">Finding a Solution</a></li>
    <li><a href="#what-else">What Else?</a></li>
  </ul>
</nav>
    </div>
</div>

  

        </div><script defer data-domain="randomgeekery.org" src="https://plausible.io/js/script.js"></script>
    </body>
</html>
