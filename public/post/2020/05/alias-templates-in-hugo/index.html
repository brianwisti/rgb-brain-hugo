<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.60856f0f2ed73fb3cd2820ee548c4698ffbc4d743736e852c0e27ce4f52dfd9c.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  

<meta property="og:url" content="https://randomgeekery.org/post/2020/05/alias-templates-in-hugo/">
<meta property="og:title" content="Alias Templates in Hugo">
<meta name="twitter:title" content="Alias Templates in Hugo">


  <meta name="twitter:site" content="@brianwisti">



  
    <meta name="twitter:description" content="I killed some redirects for accessibility and likes">
    <meta property="og:description" content="I killed some redirects for accessibility and likes">
  



<title itemprop="name">Alias Templates in Hugo - Random Geekery</title>
<meta property="og:title" content=Alias&#32;Templates&#32;in&#32;Hugo&#32;-&#32;Random&#32;Geekery />
<meta name="twitter:title" content=Alias&#32;Templates&#32;in&#32;Hugo&#32;-&#32;Random&#32;Geekery />
<meta itemprop="name" content=Alias&#32;Templates&#32;in&#32;Hugo&#32;-&#32;Random&#32;Geekery />
<meta name="application-name" content=Alias&#32;Templates&#32;in&#32;Hugo&#32;-&#32;Random&#32;Geekery />
<meta property="og:site_name" content="Random Geekery" />


<meta name="description" content="I killed some redirects for accessibility and likes" />
<meta itemprop="description" content="I killed some redirects for accessibility and likes" />
<meta property="og:description" content="I killed some redirects for accessibility and likes" />
<meta name="twitter:description" content="I killed some redirects for accessibility and likes" />


<base href="https://randomgeekery.org/post/2020/05/alias-templates-in-hugo/" />
<link rel="canonical" href="https://randomgeekery.org/post/2020/05/alias-templates-in-hugo/" itemprop="url" />
<meta name="url" content="https://randomgeekery.org/post/2020/05/alias-templates-in-hugo/" />
<meta name="twitter:url" content="https://randomgeekery.org/post/2020/05/alias-templates-in-hugo/" />
<meta property="og:url" content="https://randomgeekery.org/post/2020/05/alias-templates-in-hugo/" />


<meta property="og:updated_time" content=20005-20-03T515:00:20-0700 />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://randomgeekery.org/sitemap.xml' />

  <link
      rel="alternate"
      type="application/rss+xml"
    
        href="/index.xml"
    
      title="Random Geekery"/>



<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Random Geekery" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.121.2">


    
    

<link
    rel="stylesheet"
    href="/css/style.fe9735814e6394fb590ff4fd2eb036a13152e6808ad90dd06ba181d89087b5d3.css"
    integrity="sha256-/pc1gU5jlPtZD/T9LrA2oTFS5oCK2Q3Qa6GB2JCHtdM=" 
    crossorigin="anonymous">


</head>

    <body class="">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="https://randomgeekery.org">
                <h1>Random Geekery</h1>
            </a>
        
    </h1>
    <p class="lead">
    Collecting my attempts to improve at tech, art, and life
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
      
        <li class="bullet">
          <a href="/post/">Posts</a>
        </li>
      
        <li class="bullet">
          <a href="/card/">Cards</a>
        </li>
      
        <li class="bullet">
          <a href="/now/">Now</a>
        </li>
      
        <li class="bullet">
          <a href="/follow/">Follow</a>
        </li>
      
        <li class="bullet">
          <a href="/neighborhood/">Neighborhood</a>
        </li>
      
        <li class="bullet">
          <a href="/config/">Config</a>
        </li>
      
    </ul>
</nav>

        
  <div class="related">
    <div class="related-posts">
      <h3>Related</h3>
      <ul>
        
          <li><a href="/post/2020/04/h-entry-microformat-for-indieweb-posts/">h-entry Microformat for Indieweb Posts</a></li>
        
          <li><a href="/post/2020/11/using-the-webmentionio-api/">Using the Webmention.io API</a></li>
        
          <li><a href="/post/2020/05/querying-hugo-content-with-python/">Querying Hugo Content With Python</a></li>
        
          <li><a href="/post/2020/04/indieweb-h-cards/">Indieweb h-cards</a></li>
        
          <li><a href="/post/2020/02/python-invoke/">Python Invoke</a></li>
        
      </ul>
    </div>
  </div>



        
















        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Brian Wisti. All rights reserved.
</p>
<p class="footnote">
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License
  </a>.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <nav class="masthead">
    <ul>
    
  
    
  
    
  
    
  

    <li><a href="https://randomgeekery.org/">Random Geekery</a></li>
  

    <li><a href="https://randomgeekery.org/post/">Posts</a></li>
  

    <li><a href="https://randomgeekery.org/post/2020/">2020</a></li>
  

    <li><a class="active" href="https://randomgeekery.org/post/2020/05/alias-templates-in-hugo/">Alias Templates in Hugo</a></li>
</nav>



  <div class="info">
    <h1 class="post-title">
        <a href="https://randomgeekery.org/post/2020/05/alias-templates-in-hugo/">Alias Templates in Hugo</a>
    </h1>
    
        <time datetime="2020-05-20T15:15:00-0700" class="post-date">
            May 20, 2020
        </time>
    
    
    <ul class="tags">
        
        <li class="tag-hugo">
            <a href="https://randomgeekery.org/tags/hugo">hugo</a>
        </li>
        
        <li class="tag-accessibility">
            <a href="https://randomgeekery.org/tags/accessibility">accessibility</a>
        </li>
        
        <li class="tag-indieweb">
            <a href="https://randomgeekery.org/tags/indieweb">indieweb</a>
        </li>
        
        <li class="tag-i-fixed-it">
            <a href="https://randomgeekery.org/tags/i-fixed-it">i-fixed-it</a>
        </li>
        
        <li class="tag-hopefully">
            <a href="https://randomgeekery.org/tags/hopefully">hopefully</a>
        </li>
        
        <li class="tag-site">
            <a href="https://randomgeekery.org/tags/site">site</a>
        </li>
        
        <li class="tag-tools">
            <a href="https://randomgeekery.org/tags/tools">tools</a>
        </li>
        
    </ul>
    
    
    
    
    
    
</div>

  <p><figure>
    <img src="/../../../attachments/img/2020/cover-2020-05-20.png" alt="attachments/img/2020/cover-2020-05-20.png"/></figure>
It&rsquo;s not a redirect anymore</p>
<blockquote>
<p>[!WARNING] Don&rsquo;t do this
This was an interesting experiment, but messed with results on search engine pages. Nothing but &ldquo;This Page Has Moved!&rdquo; as far as the eye can see after a few months.</p>
<p>Use regular <a href="/card/hugo/">card/Hugo</a> alias frontmatter and leave it at that.</p>
</blockquote>
<p>Yesterday I <a href="/post/2020/05/setting-up-raku-with-rakubrew/">wrote</a> about using <a href="https://rakubrew.org/">rakubrew</a>, a tool for managing installations of the <a href="/card/raku/">card/Raku</a> programming language.  It’s an okay post.  I liked my little shoutout to <a href="https://web.archive.org/web/20200212094016/http://theperlfisher.com/">Jeff Goff</a>.  Those who knew him better shared <a href="https://wendyga.wordpress.com/2020/04/06/jeff-goff-thanks-for-being-a-friend/">better words</a>.</p>
<p>Anyways — the post!  People responded on Twitter and Mastodon.  It was great.</p>
<p>Except none of those responses show up in the &ldquo;IndieWeb Reactions&rdquo; section of the post here on the site.</p>
<h2 id="a-problem">A problem</h2>
<p>I know why — basically.</p>
<p>My post title and URL referenced Rakubrew’s predecessor &ldquo;Rakudobrew,&rdquo; which I considered an unacceptable faux pas.  So I fixed it.</p>
<h2 id="hugo-aliases-a-solution-to-for-my-url-typo">Hugo aliases: A solution to for my URL typo</h2>
<p>This faux pas was easily corrected with <a href="https://gohugo.io/content-management/urls/#aliases">Hugo Aliases</a>.  Move your content where it needs to be, and add an alias for the old link to content front matter.</p>
<figure class="highlight">
  <figcaption><span>Front matter for my Rakubrew post</span></figcaption>
  <pre tabindex="0" class="chroma"
    ><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l">Setting up Raku with Rakubrew</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">stub</span><span class="p">:</span><span class="w"> </span><span class="l">setting-up-raku-with-rakubrew</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">⋮</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">aliases</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span>- <span class="l">/post/2020/05/setting-up-raku-with-rakudobrew/</span></span></span></code></pre>
</figure><p>With default configuration, Hugo generates an HTML redirect page for every alias.</p>
<figure class="highlight">
  <figcaption><span>HTML generated by Hugo for the alias</span></figcaption>
  <pre tabindex="0" class="chroma"
    ><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>https://randomgeekery.org/post/2020/05/setting-up-raku-with-rakubrew/<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;canonical&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://randomgeekery.org/post/2020/05/setting-up-raku-with-rakubrew/&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;robots&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;noindex&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;refresh&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;0; url=https://randomgeekery.org/post/2020/05/setting-up-raku-with-rakubrew/&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></span></span></code></pre>
</figure><p>The visitor may briefly see a blank page.  Browsers visiting the old URL see the <code>http-equiv=&quot;refresh&quot;</code> element and immediately go to the new <code>url</code>. Normally, this is fine.</p>
<h2 id="now-for-todays-problem">Now for today’s problem</h2>
<p>Now my <em>inbox/Webmention</em> feed is busted.  The syndication links all point to the old URL.  Visitors get corrected, but Webmention senders don’t.  <a href="https://brid.gy/">Brid.gy</a> — a lovely service which forwards social network reactions to your webmention handler — saw nothing to forward to!</p>
<p><figure>
    <img src="/attachments/img/2020/bridgy.png" alt="Bridgy dashboard showing &ldquo;No webmention support&rdquo; in responses to my old URL"/></figure></p>
<p>Well of <em>course</em> there’s no Webmention support.  The generated alias files have no <code>link rel=&quot;webmention&quot;</code>!</p>
<p>Took me a solid hour to figure that one out.</p>
<h2 id="use-a-custom-alias-template-for-my-webmention-problem">Use a custom alias template for my webmention problem</h2>
<p>Oh thank goodness. Hugo supports <a href="https://gohugo.io/content-management/urls/#customize">custom alias templates</a>.</p>
<p>What’s the least I can do to get things working?</p>
<figure class="highlight">
  <figcaption><tt>layouts/alias.html</tt></figcaption>
  <pre tabindex="0" class="chroma"
    ><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ .Permalink }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;canonical&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;webmention&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://webmention.io/randomgeekery.org/webmention&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;pingback&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://webmention.io/randomgeekery.org/xmlrpc&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;robots&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;noindex&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;refresh&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;0; url={{ .Permalink }}&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></span></span></code></pre>
</figure><blockquote>
<p><strong>NOTE</strong></p>
<p>I was going to do a whole post on receiving webmentions, but that’s basically it  right there. Sign up at <a href="https://webmention.io">Webmention.io</a> and add the <code>&lt;link&gt;</code> to your pages.</p>
</blockquote>
<p>Brid.gy now sees the webmention link at the old URL.  I can manually resend the relevant mentions.  All is well.</p>
<p>Almost.  Now that I’m looking at my templates, I see problems.</p>
<h2 id="this-afternoons-problem-accessibility">This afternoon’s problem: accessibility</h2>
<p>Non-essential page refreshes cause accessibility issues.  Visitors may not have enough time to read the page before it redirects them.  And what if the refresh doesn’t happen, either due to user preference or browser bug?  The blank page offers no clue as to what they should expect.</p>
<p>So I go read the <a href="https://www.w3.org/TR/WCAG21/">Web Content Accessibility Guidelines</a>.  Okay I skimmed it. We already know there’s plenty more I could be doing for accessibility.  No need to get overwhelmed.</p>
<p>Oh heck — the WCAG figures client-side page refreshes should be treated as <a href="https://www.w3.org/TR/WCAG10-CORE-TECHS/#auto-page-refresh">deprecated</a>.</p>
<blockquote>
<p>Until user agents provide the ability to stop auto-redirect, do not use markup to redirect pages automatically.  Instead, configure the server to perform redirects.</p>
</blockquote>
<p>I tried that, and it still caused confusion about webmentions.  Services out there expect to interact with the link they have, and they don’t all understand redirect.  I don’t have to like it, but I should acknowledge it.</p>
<p>They list specific tests for client-side page refreshes.  I could compare what I have to the list.</p>
<figure class="border-primary border-left pl-9 container-9 centered">
  <blockquote
    cite="https://www.w3.org/WAI/WCAG21/Techniques/failures/F41.html">
<p>For a page that uses <code>meta http-equiv=&quot;refresh&quot;</code>:</p>
<ol>
<li>Check that the numerical value for seconds until refresh in the content attribute is present.</li>
<li>Check that the numerical value for seconds until refresh in the content attribute is less than one or greater than 72,000.</li>
<li>Check if the page qualifies for Real-time or Essential Exceptions in Success Criterion 2.2.1 Timing Adjustable.</li>
<li>Check if the user is provided an opportunity to turn off, extend, or adjust the timing of the page refresh.</li>
<li>Check if the page does not refresh after the duration specified in the content attribute.</li>
</ol>
  </blockquote><figcaption class="align-right">
    &mdash;
    WCAG21, <a href="https://www.w3.org/WAI/WCAG21/Techniques/failures/F41.html">Failure of Success Criterion 2.2.1, 2.2.4, and 3.2.5 due to using meta refresh to reload the page</a>
  </figcaption></figure>
<ul>
<li>There is a numerical value: <code>0</code>. Yay!</li>
<li>zero is less than one. Yay!</li>
<li>Nothing about my page requires real-time interaction, and while <em>I</em> may think   it’s <a href="https://www.w3.org/TR/WCAG21/#dfn-essential">essential</a> to get you at the updated address, you could get the same   result if I give you a link.  Even more unnerving for me: you could <em>choose</em>   not to follow that link.</li>
<li>How would I let a user control an automatic refresh?  Some Javascript maybe? Sure I want to add client-side functionality to the site, but I don’t want to start here.</li>
</ul>
<p>&ldquo;Ah,&rdquo; I hear you say.  &ldquo;But your alias refreshes immediately. Besides, there’s no content to read!&rdquo;</p>
<p>Right, I know.  I’m talking about what they call an &ldquo;edge case.&rdquo; Most people are used to Web pages shifting and changing address underneath them.  We’re used to doing it to them, anyways.</p>
<p>And the more I think about it, the more that empty page bugs me.  We should tell folks if we’re sending them somewhere else.  We should give them the option of not going.</p>
<p>Maybe just &ldquo;this page moved&rdquo; and a link instead of an automatic refresh.  That works for now.</p>
<p>I have no problem with automatic redirect for non-entry content: sections, pagination, archives, tag listings, and so on.  I made peace with my constant puttering on those a long time ago.  <a href="https://help.dreamhost.com/hc/en-us/articles/215747748-How-can-I-redirect-and-rewrite-my-URLs-with-an-htaccess-file-">redirect in <code>.htaccess</code></a> suffices for non-entry content.  But actual posts and pages should stay constant or at the very least tell you where they went.</p>
<p>And this post adds a new rule that they need to tell <em>you</em> — not just the browser.</p>
<p>This is what I came up with, more or less.</p>
<figure class="highlight">
  <figcaption><tt>layouts/alias.html</tt></figcaption>
  <pre tabindex="0" class="chroma"
    ><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>{{ .Permalink }}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;canonical&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;webmention&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://webmention.io/randomgeekery.org/webmention&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;pingback&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://webmention.io/randomgeekery.org/xmlrpc&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;robots&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;noindex&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    {{ if .Page }}
</span></span><span class="line"><span class="cl">      {{- $includeAnalytics := getenv &#34;INCLUDE_ANALYTICS&#34; -}} <span class="c">&lt;!-- 1 --&gt;</span>
</span></span><span class="line"><span class="cl">      {{- if eq $includeAnalytics &#34;1&#34; -}}
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">async</span> <span class="na">defer</span> <span class="na">data-domain</span><span class="o">=</span><span class="s">&#34;randomgeekery.org&#34;</span>
</span></span><span class="line"><span class="cl">                            <span class="na">src</span><span class="o">=</span><span class="s">&#34;https://plausible.io/js/plausible.js&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      {{- end -}}
</span></span><span class="line"><span class="cl">    {{ else }}
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;refresh&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;0; url={{ .Permalink }}&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    {{ end }}
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{ with .Page }}
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>This Page Has Moved!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        For some reason — Web address typos and site reorganization are <span class="p">&lt;</span><span class="nt">em</span><span class="p">&gt;</span>very<span class="p">&lt;/</span><span class="nt">em</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        likely — {{ .Page.Title }} moved to <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Permalink }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>.
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{ else }} <span class="c">&lt;!-- 2 --&gt;</span>
</span></span><span class="line"><span class="cl">      {{/* reenable to hunt down pagination links <span class="c">&lt;!-- 3 --&gt;</span>
</span></span><span class="line"><span class="cl">        {{ warnf &#34;No page defined for %q&#34; .Permalink }}
</span></span><span class="line"><span class="cl">      */}}
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        Hugo generated this redirect to <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>{{ .Permalink }}<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        automatically during site generation. Please follow the link if your browser
</span></span><span class="line"><span class="cl">        does not immediately redirect.
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{ end }}
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></span></span></code></pre>
</figure><ol>
<li>Analytics for aliased pages, because I want to know if folks are clicking on
old links, but not for pagination aliases. Those are noise for me, not
information.</li>
<li>Today I learned that <a href="https://gohugo.io/functions/with/"><code>with</code></a> supports <code>else</code></li>
<li>When this <a href="https://gohugo.io/templates/introduction/#comments">comment</a> is removed, Hugo will <a href="https://gohugo.io/functions/warnf/">warn</a> me about aliases not associated with my content.</li>
</ol>
<p>It works with some tweaking.  Hugo <a href="https://gohugo.io/templates/pagination/">pagination</a> relies on aliases to setup <code>page/1</code> redirects.  Those pagination links aren’t associated with a Page, and an extra click with those would be annoying.  But in the end I have a non-refreshing informational page at the old link for page aliases, and an auto-refreshing page with context for pagination aliases.</p>
<p>Build gets much noisier with that <code>warnf</code> in place.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> make build
</span></span><span class="line"><span class="cl"><span class="go">⋮
</span></span></span><span class="line"><span class="cl"><span class="go">WARN 2020/05/20 12:27:20 No page defined for &#34;https://randomgeekery.org/tags/yeah-i-know/&#34;
</span></span></span><span class="line"><span class="cl"><span class="go">WARN 2020/05/20 12:27:20 No page defined for &#34;https://randomgeekery.org/tags/unless-thats-cool/&#34;
</span></span></span><span class="line"><span class="cl"><span class="go">WARN 2020/05/20 12:27:20 No page defined for &#34;https://randomgeekery.org/tags/zentangle/&#34;
</span></span></span><span class="line"><span class="cl"><span class="go">WARN 2020/05/20 12:27:20 No page defined for &#34;https://randomgeekery.org/tags/zombie/&#34;
</span></span></span><span class="line"><span class="cl"><span class="go">⋮
</span></span></span></code></pre>
</figure><p>Kill pagination again.</p>
<p>Mind you, I have no idea what effect this will have on Search Engine Optimization. Then again, this would be a much different site if I cared about SEO.</p>
<figure class="highlight">
  <figcaption><span>The new redirect file</span></figcaption>
  <pre tabindex="0" class="chroma"
    ><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>https://randomgeekery.org/post/2020/05/setting-up-raku-with-rakubrew/<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;canonical&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://randomgeekery.org/post/2020/05/setting-up-raku-with-rakubrew/&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;webmention&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://webmention.io/randomgeekery.org/webmention&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;pingback&#34;</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://webmention.io/randomgeekery.org/xmlrpc&#34;</span><span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;robots&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;noindex&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;utf-8&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;refresh&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;0; url=https://randomgeekery.org/post/2020/05/setting-up-raku-with-rakubrew/&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>This Page Has Moved!<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      For one reason or another — Web address typos and site reorganization are
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">em</span><span class="p">&gt;</span>very<span class="p">&lt;/</span><span class="nt">em</span><span class="p">&gt;</span> likely — &#34;Setting up Raku with Rakubrew&#34; moved to a new address.
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      If your browser does not immediately send you to the new location,
</span></span><span class="line"><span class="cl">      you can visit <span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://randomgeekery.org/post/2020/05/setting-up-raku-with-rakubrew/&#34;</span><span class="p">&gt;</span>https://randomgeekery.org/post/2020/05/setting-up-raku-with-rakubrew/<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span> yourself.
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span></span></span></code></pre>
</figure><p>Now that I decided to go with an unchanging alias page, it needs to fit in stylistically with the rest of the site.  You don’t need to worry about those details though.</p>
<p>All this because I wanted to see my Twitter likes on the page.</p>

  






  <hr>
  

  
    <section>
      <p>
        Got a comment? A question? More of a comment than a question?
      </p>
      <p>
        Talk to me about this page on:
        
          
            <a
              href="https://hackers.town/@randomgeek/104203115715792019"
              class="u-syndication label centered fa fa-mastodon"
              title="Mastodon"
              rel="syndication"
              aria-label="Mastodon"
            >
              <span class="sr-only">mastodon</span>
            </a>
          
        
          
        
      </p>
    </section>
  
  
<hr>
<div class="footer">
    
    
      <a class="previous-post" href="https://randomgeekery.org/post/2020/05/setting-up-raku-with-rakubrew/?ref=footer">
        <span style="font-weight:bold;">« Previous</span>
        <br>Setting up Raku with Rakubrew
      </a>
    
    
      <div class="next-post">
        <a href="https://randomgeekery.org/post/2020/05/enjoyed-this-derek-sivers-interview/?ref=footer">
          <span style="font-weight:bold;">Next »</span>
          <br>Enjoyed this Derek Sivers interview
        </a>
      </div>
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#a-problem">A problem</a></li>
    <li><a href="#hugo-aliases-a-solution-to-for-my-url-typo">Hugo aliases: A solution to for my URL typo</a></li>
    <li><a href="#now-for-todays-problem">Now for today’s problem</a></li>
    <li><a href="#use-a-custom-alias-template-for-my-webmention-problem">Use a custom alias template for my webmention problem</a></li>
    <li><a href="#this-afternoons-problem-accessibility">This afternoon’s problem: accessibility</a></li>
  </ul>
</nav>
    </div>
</div>

  

        </div><script defer data-domain="randomgeekery.org" src="https://plausible.io/js/script.js"></script>
    </body>
</html>
