<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.60856f0f2ed73fb3cd2820ee548c4698ffbc4d743736e852c0e27ce4f52dfd9c.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  

<meta property="og:url" content="https://randomgeekery.org/post/2016/07/hello-dancer2/">
<meta property="og:title" content="Hello Dancer2">
<meta name="twitter:title" content="Hello Dancer2">


  <meta name="twitter:site" content="@brianwisti">



  
    <meta name="twitter:description" content="Some simple first steps with the Perl 5 Dancer2 web framework">
    <meta property="og:description" content="Some simple first steps with the Perl 5 Dancer2 web framework">
  



<title itemprop="name">Hello Dancer2 - Random Geekery</title>
<meta property="og:title" content=Hello&#32;Dancer2&#32;-&#32;Random&#32;Geekery />
<meta name="twitter:title" content=Hello&#32;Dancer2&#32;-&#32;Random&#32;Geekery />
<meta itemprop="name" content=Hello&#32;Dancer2&#32;-&#32;Random&#32;Geekery />
<meta name="application-name" content=Hello&#32;Dancer2&#32;-&#32;Random&#32;Geekery />
<meta property="og:site_name" content="Random Geekery" />


<meta name="description" content="Some simple first steps with the Perl 5 Dancer2 web framework" />
<meta itemprop="description" content="Some simple first steps with the Perl 5 Dancer2 web framework" />
<meta property="og:description" content="Some simple first steps with the Perl 5 Dancer2 web framework" />
<meta name="twitter:description" content="Some simple first steps with the Perl 5 Dancer2 web framework" />


<base href="https://randomgeekery.org/post/2016/07/hello-dancer2/" />
<link rel="canonical" href="https://randomgeekery.org/post/2016/07/hello-dancer2/" itemprop="url" />
<meta name="url" content="https://randomgeekery.org/post/2016/07/hello-dancer2/" />
<meta name="twitter:url" content="https://randomgeekery.org/post/2016/07/hello-dancer2/" />
<meta property="og:url" content="https://randomgeekery.org/post/2016/07/hello-dancer2/" />


<meta property="og:updated_time" content=11007-11-12T70:00:16-0700 />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://randomgeekery.org/sitemap.xml' />

  <link
      rel="alternate"
      type="application/rss+xml"
    
        href="/index.xml"
    
      title="Random Geekery"/>



<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Random Geekery" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.121.2">


    
    

<link
    rel="stylesheet"
    href="/css/style.15361b4c24f30033251cd8947e34c41e754c9461dc117cab390ac04e365faec3.css"
    integrity="sha256-FTYbTCTzADMlHNiUfjTEHnVMlGHcEXyrOQrATjZfrsM=" 
    crossorigin="anonymous">


</head>

    <body class="">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="https://randomgeekery.org">
                <h1>Random Geekery</h1>
            </a>
        
    </h1>
    <p class="lead">
    Collecting my attempts to improve at tech, art, and life
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
      
        <li class="bullet">
          <a href="/follow/">Follow</a>
        </li>
      
        <li class="bullet">
          <a href="/now/">Now</a>
        </li>
      
    </ul>
</nav>

        
  <div class="related">
    <div class="related-posts">
      <h3>Related</h3>
      <ul>
        
          <li><a href="/post/2019/12/dwim-is-consistent/">DWIM is consistent</a></li>
        
          <li><a href="/post/2017/04/making-a-mojo-link-checker/">Making A Mojo Link Checker</a></li>
        
          <li><a href="/post/2017/02/converting-ogg-to-mp3/">Converting OGG To MP3</a></li>
        
          <li><a href="/post/2014/12/finding-and-removing-duplicate-files/">Finding and Removing Duplicate Files</a></li>
        
          <li><a href="/post/2014/06/perl-520-signatures-in-subroutine-references/">Perl 5.20 Signatures in Subroutine References</a></li>
        
      </ul>
    </div>
  </div>



        
















        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Brian Wisti. All rights reserved.
</p>
<p class="footnote">
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License
  </a>.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <nav class="masthead">
    <ul>
    
  
    
  
    
  

    <li><a href="https://randomgeekery.org/">Random Geekery</a></li>
  

    <li><a href="https://randomgeekery.org/post/">Posts</a></li>
  

    <li><a class="active" href="https://randomgeekery.org/post/2016/07/hello-dancer2/">Hello Dancer2</a></li>
</nav>



  <div class="info">
    <h1 class="post-title">
        <a href="https://randomgeekery.org/post/2016/07/hello-dancer2/">Hello Dancer2</a>
    </h1>
    
        <time datetime="2016-07-11T00:00:00-0700" class="post-date">
            July 11, 2016
        </time>
    
    
    <ul class="tags">
        
        <li class="tag-perl">
            <a href="https://randomgeekery.org/tags/perl">perl</a>
        </li>
        
        <li class="tag-dancer">
            <a href="https://randomgeekery.org/tags/dancer">dancer</a>
        </li>
        
        <li class="tag-learn">
            <a href="https://randomgeekery.org/tags/learn">learn</a>
        </li>
        
        <li class="tag-programming">
            <a href="https://randomgeekery.org/tags/programming">programming</a>
        </li>
        
    </ul>
    
    
    
    
    
    
</div>

  <p>The <a href="https://github.com/PerlDancer/">PerlDancer</a> team’s <a href="https://metacpan.org/pod/Dancer2">Dancer2</a> project is a <a href="/card/perl/">card/Perl</a> framework for writing Web applications with less <a href="https://en.wikipedia.org/wiki/Boilerplate_code">boilerplate code</a> than other Web frameworks. I am slowly exploring what it offers. Feel free to follow along.</p>
<p>This is sort of a tutorial. I assume you know Perl and maybe a bit about Web server programming, but not that you have mastered either. My pace may annoy you if you <em>have</em> mastered Perl, Web programming, or Dancer2.</p>
<h2 id="installation">Installation</h2>
<p>I use Perl 5.24.0 and <a href="https://metacpan.org/pod/App::cpanminus">cpanm</a> via <a href="http://perlbrew.pl/">Perlbrew</a>. Installation of Dancer2 and its dependencies requires a single command.</p>
<pre tabindex="0"><code>$ cpanm Dancer2
</code></pre><h2 id="hey">Hey</h2>
<p>You do not need much code to create a Dancer2 application.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">use</span> <span class="nn">Dancer2</span><span class="p">;</span>     <span class="c1"># Load Dancer2 and its keywords</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">get</span> <span class="s">&#39;/hey&#39;</span> <span class="o">=&gt;</span> <span class="k">sub</span> <span class="p">{</span> <span class="c1"># Define some routes</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="s">&#39;Hey!&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">start</span><span class="p">;</span>           <span class="c1"># Run the application</span>
</span></span></code></pre></div><p>Even better: you can hand this code to Perl and it starts a server!</p>
<pre tabindex="0"><code>$ perl hey.pl
&gt;&gt; Dancer2 v0.200002 server 15388 listening on http://0.0.0.0:3000
</code></pre><p>Loading <code>http://localhost:3000/hey</code> in a browser shows our simple message.</p>
<p><img src="/post/2016/07/attachments/img/2016/dancer2-hey.png" title="Hey from Dancer2!" alt="Hey from Dancer2"/></p>
<p>Dancer2 gives you a <a href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL</a> — Domain-Specific Language — to describe your application. These DSL <a href="https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual.pod#DSL-KEYWORDS">keywords</a> cut down the boilerplate code common in some Web development frameworks.</p>
<h3 id="get"><code>get</code></h3>
<p>The <a href="https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual.pod#get">get</a> keyword defines a <a href="https://metacpan.org/pod/Dancer2::Core::Route">route</a> for Dancer2. Routes tell Dancer2 how to respond when someone requests a path — the /hey bit — from your application. <code>get</code> is also a method from <a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a>. Use it when you only want to &ldquo;get&rdquo; something from the application. Dancer2 has keywords for more HTTP methods, but <code>get</code> is fine for now.</p>
<p>What happens if someone requests a path that you did not define?</p>
<p>Your Dancer2 application returns an error page informing them that the path does not exist.</p>
<p>With the HTTP method and path defined, the last important part of our route is the code. Your application runs that code and sends its return value to the visitor. Our first route code example is an anonymous subroutine that returns the text &ldquo;Hello!&rdquo;, but they can be as complicated as you need.</p>
<h3 id="start"><code>start</code></h3>
<p><a href="https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual.pod#start">start</a> tells Dancer2 that you finished defining your application and it can begin serving to the world.</p>
<p>DSL = Keywords + Sugar</p>
<p>Keywords make the Dancer2 DSL work, but the code style takes advantage of Perl’s flexible syntax. Our route looks like this with less <a href="https://en.wikipedia.org/wiki/Syntactic_sugar">syntactic sugar</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="n">get</span><span class="p">(</span><span class="s">&#39;/hey&#39;</span><span class="p">,</span> <span class="k">sub</span> <span class="p">{</span> <span class="k">return</span> <span class="s">&#39;Hey!&#39;</span><span class="p">;</span> <span class="p">});</span>
</span></span></code></pre></div><h2 id="hey-you">Hey You</h2>
<p>How about greeting the visitor by name? Since form processing involves more steps than I want to think about today, we use route parameters instead.</p>
<p>Dancer2 allows placeholders in route paths. The simplest placeholders are tokens prefixed with a colon, such as <code>:name</code> or <code>:id</code>. When you make a request that matches, such as <code>/hey/brian</code>, Dancer2 saves the matching path part. Here, look at some code.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">use</span> <span class="nn">Dancer2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># A simple greeting: /hey</span>
</span></span><span class="line"><span class="cl"><span class="n">get</span> <span class="s">&#39;/hey&#39;</span> <span class="o">=&gt;</span> <span class="k">sub</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="s">&#39;Hey!&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># A personalized greeting: /hey/Brian</span>
</span></span><span class="line"><span class="cl"><span class="n">get</span> <span class="s">&#39;/hey/:name&#39;</span> <span class="o">=&gt;</span> <span class="k">sub</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">my</span> <span class="nv">$name</span> <span class="o">=</span> <span class="nn">route_parameters</span><span class="o">-&gt;</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="s">&#34;Hey $name!&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">start</span><span class="p">;</span>
</span></span></code></pre></div><p>Route handlers can get <a href="https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual.pod#Route-Handlers">much more complicated</a>, but not today. Our application treats a general greeting and a greeting with a distinct name at two different actions, so we use two different routes.</p>
<p>In order to use the new code, we need to stop the Perl process. <code>Control-C</code> should do it. Then launch it again, and the new code will be loaded.</p>
<pre tabindex="0"><code>$ perl hey.pl
&gt;&gt; Dancer2 v0.200002 server 31385 listening on http://0.0.0.0:3000
</code></pre><p>Now we should be able to see <a href="http://localhost:3000/hey/Brian">http://localhost:3000/hey/Brian</a> — or whatever name you prefer.</p>
<p><img src="/post/2016/07/attachments/img/2016/dancer2-hey-brian.png" alt="&ldquo;Hey Brian!&rdquo; in Dancer2"/></p>
<h3 id="route_parameters"><code>route_parameters</code></h3>
<p><a href="https://metacpan.org/pod/distribution/Dancer2/lib/Dancer2/Manual.pod#route_parameters">route_parameters</a> returns a <a href="https://metacpan.org/pod/Hash::MultiValue">hash-like object</a> which stores tokens and their values from a route match. Use the <code>get</code> method when you need those values in your route code.</p>
<h2 id="wrap-it-up">Wrap It Up</h2>
<p>We installed Dancer2, made just about the simplest Web application I could think of, and explored a little bit about declaring routes.</p>
<p>What’s next? I plan to look at using template files to produce real Web pages.</p>

  






  <hr>
  

  
    <section>
      <p>
        Got a comment? A question? More of a comment than a question?
      </p>
      <p>
        Talk to me about this page on:
        
          
        
      </p>
    </section>
  
  
<hr>
<div class="footer">
    
    
      <a class="previous-post" href="https://randomgeekery.org/post/2016/06/using-disqus-in-hugo/?ref=footer">
        <span style="font-weight:bold;">« Previous</span>
        <br>Using Disqus in Hugo
      </a>
    
    
      <div class="next-post">
        <a href="https://randomgeekery.org/post/2016/09/chibi-rainyday-superstar/?ref=footer">
          <span style="font-weight:bold;">Next »</span>
          <br>Chibi Rainyday Superstar
        </a>
      </div>
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#installation">Installation</a></li>
    <li><a href="#hey">Hey</a>
      <ul>
        <li><a href="#get"><code>get</code></a></li>
        <li><a href="#start"><code>start</code></a></li>
      </ul>
    </li>
    <li><a href="#hey-you">Hey You</a>
      <ul>
        <li><a href="#route_parameters"><code>route_parameters</code></a></li>
      </ul>
    </li>
    <li><a href="#wrap-it-up">Wrap It Up</a></li>
  </ul>
</nav>
    </div>
</div>

  

        </div><script defer data-domain="randomgeekery.org" src="https://plausible.io/js/script.js"></script>
    </body>
</html>
