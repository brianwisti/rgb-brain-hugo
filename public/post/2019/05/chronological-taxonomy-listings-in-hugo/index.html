<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.60856f0f2ed73fb3cd2820ee548c4698ffbc4d743736e852c0e27ce4f52dfd9c.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  

<meta property="og:url" content="https://randomgeekery.org/post/2019/05/chronological-taxonomy-listings-in-hugo/">
<meta property="og:title" content="Chronological Taxonomy Listings in Hugo">
<meta name="twitter:title" content="Chronological Taxonomy Listings in Hugo">


  <meta name="twitter:site" content="@brianwisti">



  
    <meta name="twitter:description" content="The archive pages now list tags and categories such that the ones with most recent posts come first!
That may not sound impressive or even necessary. card/Hugo’s normal taxonomy ordering .Data.Terms.ByCount and .Data.Terms.Alphabetical are sufficient for normal cases, and taxonomy detail pages already present their posts in a reverse chronology.
This site isn’t quite a normal case. The Random Geekery Blog is almost six years old, and includes archived content from other sites dating back to 2000.">
    <meta property="og:description" content="The archive pages now list tags and categories such that the ones with most recent posts come first!
That may not sound impressive or even necessary. card/Hugo’s normal taxonomy ordering .Data.Terms.ByCount and .Data.Terms.Alphabetical are sufficient for normal cases, and taxonomy detail pages already present their posts in a reverse chronology.
This site isn’t quite a normal case. The Random Geekery Blog is almost six years old, and includes archived content from other sites dating back to 2000.">
  



<title itemprop="name">Chronological Taxonomy Listings in Hugo - Random Geekery</title>
<meta property="og:title" content=Chronological&#32;Taxonomy&#32;Listings&#32;in&#32;Hugo&#32;-&#32;Random&#32;Geekery />
<meta name="twitter:title" content=Chronological&#32;Taxonomy&#32;Listings&#32;in&#32;Hugo&#32;-&#32;Random&#32;Geekery />
<meta itemprop="name" content=Chronological&#32;Taxonomy&#32;Listings&#32;in&#32;Hugo&#32;-&#32;Random&#32;Geekery />
<meta name="application-name" content=Chronological&#32;Taxonomy&#32;Listings&#32;in&#32;Hugo&#32;-&#32;Random&#32;Geekery />
<meta property="og:site_name" content="Random Geekery" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="https://randomgeekery.org/post/2019/05/chronological-taxonomy-listings-in-hugo/" />
<link rel="canonical" href="https://randomgeekery.org/post/2019/05/chronological-taxonomy-listings-in-hugo/" itemprop="url" />
<meta name="url" content="https://randomgeekery.org/post/2019/05/chronological-taxonomy-listings-in-hugo/" />
<meta name="twitter:url" content="https://randomgeekery.org/post/2019/05/chronological-taxonomy-listings-in-hugo/" />
<meta property="og:url" content="https://randomgeekery.org/post/2019/05/chronological-taxonomy-listings-in-hugo/" />


<meta property="og:updated_time" content=20005-20-12T50:00:19-0700 />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://randomgeekery.org/sitemap.xml' />

  <link
      rel="alternate"
      type="application/rss+xml"
    
        href="/index.xml"
    
      title="Random Geekery"/>



<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Random Geekery" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.121.2">


    
    

<link
    rel="stylesheet"
    href="/css/style.fe9735814e6394fb590ff4fd2eb036a13152e6808ad90dd06ba181d89087b5d3.css"
    integrity="sha256-/pc1gU5jlPtZD/T9LrA2oTFS5oCK2Q3Qa6GB2JCHtdM=" 
    crossorigin="anonymous">


</head>

    <body class="">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="https://randomgeekery.org">
                <h1>Random Geekery</h1>
            </a>
        
    </h1>
    <p class="lead">
    Collecting my attempts to improve at tech, art, and life
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
      
        <li class="bullet">
          <a href="/post/">Posts</a>
        </li>
      
        <li class="bullet">
          <a href="/card/">Cards</a>
        </li>
      
        <li class="bullet">
          <a href="/now/">Now</a>
        </li>
      
        <li class="bullet">
          <a href="/follow/">Follow</a>
        </li>
      
        <li class="bullet">
          <a href="/neighborhood/">Neighborhood</a>
        </li>
      
        <li class="bullet">
          <a href="/config/">Config</a>
        </li>
      
    </ul>
</nav>

        
  <div class="related">
    <div class="related-posts">
      <h3>Related</h3>
      <ul>
        
          <li><a href="/post/2019/05/turning-taskwarrior-posts-into-a-series/">Turning Taskwarrior Posts Into a Series</a></li>
        
          <li><a href="/post/2021/08/trying-a-thing-with-neovim/">trying a thing with neovim</a></li>
        
          <li><a href="/post/2021/04/still-pondering-new-site-approaches/">Still pondering new site approaches</a></li>
        
          <li><a href="/post/2020/05/alias-templates-in-hugo/">Alias Templates in Hugo</a></li>
        
          <li><a href="/post/2020/05/querying-hugo-content-with-python/">Querying Hugo Content With Python</a></li>
        
      </ul>
    </div>
  </div>



        
















        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Brian Wisti. All rights reserved.
</p>
<p class="footnote">
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License
  </a>.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <nav class="masthead">
    <ul>
    
  
    
  
    
  
    
  

    <li><a href="https://randomgeekery.org/">Random Geekery</a></li>
  

    <li><a href="https://randomgeekery.org/post/">Posts</a></li>
  

    <li><a href="https://randomgeekery.org/post/2019/">2019</a></li>
  

    <li><a class="active" href="https://randomgeekery.org/post/2019/05/chronological-taxonomy-listings-in-hugo/">Chronological Taxonomy Listings in Hugo</a></li>
</nav>



  <div class="info">
    <h1 class="post-title">
        <a href="https://randomgeekery.org/post/2019/05/chronological-taxonomy-listings-in-hugo/">Chronological Taxonomy Listings in Hugo</a>
    </h1>
    
        <time datetime="2019-05-20T00:00:00-0700" class="post-date">
            May 20, 2019
        </time>
    
    
    <ul class="tags">
        
        <li class="tag-site">
            <a href="https://randomgeekery.org/tags/site">site</a>
        </li>
        
        <li class="tag-hugo">
            <a href="https://randomgeekery.org/tags/hugo">hugo</a>
        </li>
        
        <li class="tag-tools">
            <a href="https://randomgeekery.org/tags/tools">tools</a>
        </li>
        
    </ul>
    
    
    
    
    
    
</div>

  <p>The archive pages now list tags and categories such that the ones with most recent posts come first!</p>
<p>That may not sound impressive or even necessary. <a href="/card/hugo/">card/Hugo</a>’s normal <a href="https://gohugo.io/variables/taxonomy/">taxonomy</a> ordering <code>.Data.Terms.ByCount</code> and <code>.Data.Terms.Alphabetical</code> are sufficient for normal cases, and taxonomy detail pages already present their posts in a reverse chronology.</p>
<p>This site isn’t <em>quite</em> a normal case. The Random Geekery Blog is almost six years  old, and includes archived content from other sites dating back to 2000. My many obsessions have waxed and waned over the years. Presenting tags by name or by number of posts means we must dig to find out what’s relevant to me lately. I find that frustrating because of the way my brain holds information: fresh topics are near the top, and older stuff is somewhere down below when I need it.</p>
<p>After the traditional grumbling about how this would be a two minute task with Perl, I set to the task of figuring it out. Let’s skip the bits where I messed around with <code>$.Scratch</code> and get straight to what worked in <code>layout/_default/terms.html</code>.</p>
<p>First, I built a list of relevant information by stepping through the terms of that particular taxonomy. For each tag, category, or whatever, <a href="https://gohugo.io/functions/unix/">convert</a> the publishing date of the most recent post with that tag (or category, or whatever) to a <code>.Unix</code> timestamp.  Create a <a href="https://gohugo.io/functions/dict/">dict</a> with the term and its associated timestamp, then <a href="https://gohugo.io/functions/append/">append</a> it to a <a href="https://gohugo.io/functions/slice/">slice</a>.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-text" data-lang="text"><span class="line"><span class="cl">{{- $stamped_terms := slice -}}
</span></span><span class="line"><span class="cl">{{- range $term, $value := .Data.Terms -}}
</span></span><span class="line"><span class="cl">  {{- $last_stamp := (index $value.Pages.ByDate.Reverse 0).Date.Unix -}}
</span></span><span class="line"><span class="cl">  {{- $term_stamp := dict &#34;term&#34; $term &#34;stamp&#34; $last_stamp -}}
</span></span><span class="line"><span class="cl">  {{- $stamped_terms = $stamped_terms | append $term_stamp -}}
</span></span><span class="line"><span class="cl">{{- end -}}</span></span></code></pre>
</figure><p>Momentarily setting aside concerns for <a href="https://alexwlchan.net/2019/05/falsehoods-programmers-believe-about-unix-time/">falsehoods programmers believe about UNIX time</a>, I have a list of terms and their freshest post’s timestamp. Leap seconds probably won’t be an issue here.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-text" data-lang="text"><span class="line"><span class="cl">map[stamp:1143504000 term:43-things]
</span></span><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl">map[stamp:1526515200 term:zentangle]</span></span></code></pre>
</figure><p>I <a href="https://gohugo.io/functions/sort/">sort</a> that list based on the timestamp, in descending order. Grab the term
from the <code>dict</code> and then it’s pretty much the same taxonomy summary I had
before.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-text" data-lang="text"><span class="line"><span class="cl">&lt;dl&gt;
</span></span><span class="line"><span class="cl"> {{ range $stamp := sort $stamped_terms &#34;stamp&#34; &#34;desc&#34; -}}
</span></span><span class="line"><span class="cl">   {{- $key := index $stamp &#34;term&#34; -}}
</span></span><span class="line"><span class="cl">   {{- $value := index $.Data.Terms $key -}}
</span></span><span class="line"><span class="cl">   &lt;dt&gt;
</span></span><span class="line"><span class="cl">     &lt;a href=&#34;/{{ $.Data.Plural | urlize }}/{{ $key | urlize }}/&#34;&gt;{{ $key }}&lt;/a&gt;
</span></span><span class="line"><span class="cl">   &lt;/dt&gt;
</span></span><span class="line"><span class="cl">   &lt;dd&gt;
</span></span><span class="line"><span class="cl">     {{- $first_post := index $value.Pages.ByDate 0 -}}
</span></span><span class="line"><span class="cl">     {{ if eq $value.Count 1 }}
</span></span><span class="line"><span class="cl">       Includes 1 post from {{ $first_post.Date.Format $.Site.Params.DateForm }}
</span></span><span class="line"><span class="cl">     {{ else }}
</span></span><span class="line"><span class="cl">       {{- $last_post := index $value.Pages.ByDate.Reverse 0 -}}
</span></span><span class="line"><span class="cl">       Includes {{ $value.Count }} posts from
</span></span><span class="line"><span class="cl">       {{ $first_post.Date.Format $.Site.Params.DateForm }}
</span></span><span class="line"><span class="cl">       to
</span></span><span class="line"><span class="cl">       {{ $last_post.Date.Format $.Site.Params.DateForm }}
</span></span><span class="line"><span class="cl">     {{ end }}
</span></span><span class="line"><span class="cl">   &lt;/dd&gt;
</span></span><span class="line"><span class="cl"> {{ end }}
</span></span><span class="line"><span class="cl">&lt;/dl&gt;</span></span></code></pre>
</figure><p>And that’s pretty much it! Had to post in case I needed this information later.</p>

  






  <hr>
  

  
    <section>
      <p>
        Got a comment? A question? More of a comment than a question?
      </p>
      <p>
        Talk to me about this page on:
        
          
            <a
              href="https://hackers.town/@randomgeek/102132792782409820"
              class="u-syndication label centered fa fa-mastodon"
              title="Mastodon"
              rel="syndication"
              aria-label="Mastodon"
            >
              <span class="sr-only">mastodon</span>
            </a>
          
        
          
        
      </p>
    </section>
  
  
<hr>
<div class="footer">
    
    
      <a class="previous-post" href="https://randomgeekery.org/post/2019/05/turning-taskwarrior-posts-into-a-series/?ref=footer">
        <span style="font-weight:bold;">« Previous</span>
        <br>Turning Taskwarrior Posts Into a Series
      </a>
    
    
      <div class="next-post">
        <a href="https://randomgeekery.org/post/2019/05/pretty-print-terminal-files-with-bat/?ref=footer">
          <span style="font-weight:bold;">Next »</span>
          <br>Pretty Print Terminal Files With Bat
        </a>
      </div>
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents"></nav>
    </div>
</div>

  

        </div><script defer data-domain="randomgeekery.org" src="https://plausible.io/js/script.js"></script>
    </body>
</html>
