<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.60856f0f2ed73fb3cd2820ee548c4698ffbc4d743736e852c0e27ce4f52dfd9c.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  

<meta property="og:url" content="https://randomgeekery.org/post/2021/10/using-markdown-it-in-python/">
<meta property="og:title" content="Using markdown-it in Python">
<meta name="twitter:title" content="Using markdown-it in Python">


  <meta name="twitter:site" content="@brianwisti">



  
    <meta name="twitter:description" content="Figuring out just enough markdown-it-py to write this post">
    <meta property="og:description" content="Figuring out just enough markdown-it-py to write this post">
  



<title itemprop="name">Using markdown-it in Python - Random Geekery</title>
<meta property="og:title" content=Using&#32;markdown-it&#32;in&#32;Python&#32;-&#32;Random&#32;Geekery />
<meta name="twitter:title" content=Using&#32;markdown-it&#32;in&#32;Python&#32;-&#32;Random&#32;Geekery />
<meta itemprop="name" content=Using&#32;markdown-it&#32;in&#32;Python&#32;-&#32;Random&#32;Geekery />
<meta name="application-name" content=Using&#32;markdown-it&#32;in&#32;Python&#32;-&#32;Random&#32;Geekery />
<meta property="og:site_name" content="Random Geekery" />


<meta name="description" content="Figuring out just enough markdown-it-py to write this post" />
<meta itemprop="description" content="Figuring out just enough markdown-it-py to write this post" />
<meta property="og:description" content="Figuring out just enough markdown-it-py to write this post" />
<meta name="twitter:description" content="Figuring out just enough markdown-it-py to write this post" />


<base href="https://randomgeekery.org/post/2021/10/using-markdown-it-in-python/" />
<link rel="canonical" href="https://randomgeekery.org/post/2021/10/using-markdown-it-in-python/" itemprop="url" />
<meta name="url" content="https://randomgeekery.org/post/2021/10/using-markdown-it-in-python/" />
<meta name="twitter:url" content="https://randomgeekery.org/post/2021/10/using-markdown-it-in-python/" />
<meta property="og:url" content="https://randomgeekery.org/post/2021/10/using-markdown-it-in-python/" />


<meta property="og:updated_time" content=16010-16-12T100:00:21-0700 />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://randomgeekery.org/sitemap.xml' />

  <link
      rel="alternate"
      type="application/rss+xml"
    
        href="/index.xml"
    
      title="Random Geekery"/>



<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Random Geekery" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.121.2">


    
    

<link
    rel="stylesheet"
    href="/css/style.fe9735814e6394fb590ff4fd2eb036a13152e6808ad90dd06ba181d89087b5d3.css"
    integrity="sha256-/pc1gU5jlPtZD/T9LrA2oTFS5oCK2Q3Qa6GB2JCHtdM=" 
    crossorigin="anonymous">


</head>

    <body class="">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="https://randomgeekery.org">
                <h1>Random Geekery</h1>
            </a>
        
    </h1>
    <p class="lead">
    Collecting my attempts to improve at tech, art, and life
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
      
        <li class="bullet">
          <a href="/post/">Posts</a>
        </li>
      
        <li class="bullet">
          <a href="/card/">Cards</a>
        </li>
      
        <li class="bullet">
          <a href="/now/">Now</a>
        </li>
      
        <li class="bullet">
          <a href="/follow/">Follow</a>
        </li>
      
        <li class="bullet">
          <a href="/neighborhood/">Neighborhood</a>
        </li>
      
        <li class="bullet">
          <a href="/config/">Config</a>
        </li>
      
    </ul>
</nav>

        
  <div class="related">
    <div class="related-posts">
      <h3>Related</h3>
      <ul>
        
          <li><a href="/post/2021/10/i-wrote-this-note-in-hugo-with-markdown-it-py/">I wrote this note in Hugo with markdown-it-py</a></li>
        
          <li><a href="/post/2021/09/saving-some-myst-markdown-blogging-links-for-later/">Saving some MyST Markdown blogging links for later</a></li>
        
          <li><a href="/post/2009/06/python-blogger-refresh-part-1/">Python Blogger Refresh, Part 1</a></li>
        
          <li><a href="/post/2021/09/creating-a-restructuredtext-kbd-role/">Creating a reStructuredText kbd Role</a></li>
        
          <li><a href="/post/2021/08/extracting-rich-output/">Extracting Rich Output for fun and profit</a></li>
        
      </ul>
    </div>
  </div>



        
















        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Brian Wisti. All rights reserved.
</p>
<p class="footnote">
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License
  </a>.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <nav class="masthead">
    <ul>
    
  
    
  
    
  
    
  

    <li><a href="https://randomgeekery.org/">Random Geekery</a></li>
  

    <li><a href="https://randomgeekery.org/post/">Posts</a></li>
  

    <li><a href="https://randomgeekery.org/post/2021/">2021</a></li>
  

    <li><a class="active" href="https://randomgeekery.org/post/2021/10/using-markdown-it-in-python/">Using markdown-it in Python</a></li>
</nav>



  <div class="info">
    <h1 class="post-title">
        <a href="https://randomgeekery.org/post/2021/10/using-markdown-it-in-python/">Using markdown-it in Python</a>
    </h1>
    
        <time datetime="2021-10-16T00:00:00-0700" class="post-date">
            October 16, 2021
        </time>
    
    
    <ul class="tags">
        
        <li class="tag-python">
            <a href="https://randomgeekery.org/tags/python">python</a>
        </li>
        
        <li class="tag-markdown">
            <a href="https://randomgeekery.org/tags/markdown">markdown</a>
        </li>
        
    </ul>
    
    
    
    
    
    
</div>

  <blockquote>
<p><strong>NOTE</strong></p>
<p>I hope the information I share here is useful, but I&rsquo;m just documenting what I
needed to know <em>after</em> reading the markdown-it-py <a href="https://markdown-it-py.readthedocs.io/en/latest/using.html">user guide</a> for basic
usage and principles.</p>
</blockquote>
<h2 id="what-is-it">What is it</h2>
<p><a href="https://pypi.org/project/markdown-it-py/">markdown-it-py</a> is a Python markdown library based on <a href="https://github.com/markdown-it/markdown-it">markdown-it</a> from the JavaScript world. markdown-it-py provides the core flexibility needed by <a href="https://myst-nb.readthedocs.io/en/latest/use/markdown.html">MyST Markdown</a>, a particularly capable Markdown flavor for the <a href="https://executablebooks.org/en/latest/">Executable Book Project</a>.</p>
<p>markdown-it-py is configurable, extensible, and &mdash; most important for me today — not too hard to get started with.</p>
<h2 id="how-do-i-install-it">How do I install it</h2>
<p>markdown-it-py alone gets you &ldquo;enough&rdquo;. Everything you need for <a href="https://commonmark.org">CommonMark</a>, at least. But I want more than enough. I want all the features I can reasonably gather under one install.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> pip install markdown-it-py<span class="o">[</span>linkify,plugins<span class="o">]</span>
</span></span></code></pre>
</figure><p>What did that just install?</p>
<dl>
<dt><code>markdown-it-py</code></dt>
<dd>provides core markdown handling sufficient for common expected behavior</dd>
<dt><a href="https://pypi.org/project/linkify-it-py/"><code>linkify-it-py</code></a></dt>
<dd>enables recognition of URLs embedded in text strings; needs additional plugins to <em>do</em> anything with those URLs</dd>
<dt><a href="https://pypi.org/project/mdit-py-plugins/"><code>mdit-py-plugins</code></a></dt>
<dd>provides a collection of core plugins that make <code>markdown-it-py</code> useful to a feature-happy person such as myself</dd>
</dl>
<h2 id="how-do-i-use-it">How do I use it</h2>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">markdown_it</span> <span class="kn">import</span> <span class="n">MarkdownIt</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">markdown</span> <span class="o">=</span> <span class="s2">&#34;Hello, **world**&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">md</span> <span class="o">=</span> <span class="n">MarkdownIt</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nb">print</span><span class="p">(</span><span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">markdown</span><span class="p">))</span></span></span></code></pre>
</figure><figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Hello, <span class="p">&lt;</span><span class="nt">strong</span><span class="p">&gt;</span>world<span class="p">&lt;/</span><span class="nt">strong</span><span class="p">&gt;&lt;/</span><span class="nt">p</span><span class="p">&gt;</span></span></span></code></pre>
</figure><p>But I need to be just a <em>little</em> fancier than &ldquo;Hello World.&rdquo; Let&rsquo;s build a little <a href="https://typer.tiangolo.com">Typer</a> application that takes a markdown path and makes an HTML fragment. While I&rsquo;m at it, I can borrow from my <a href="/post/2021/08/trying-a-thing-with-neovim/">neovim rplugin</a> to fit everything into my Hugo site.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">typer</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">markdown_it</span> <span class="kn">import</span> <span class="n">MarkdownIt</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">make_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Return HTML string rendered from markdown source.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">md</span> <span class="o">=</span> <span class="n">MarkdownIt</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">markdown</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">source_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Transforms markdown into HTML with markdown-it-py.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">target_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;.md.txt&#34;</span><span class="p">,</span> <span class="s2">&#34;.html&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">source_path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">markdown</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">html</span> <span class="o">=</span> <span class="n">make_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">target_path</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">typer</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">)</span></span></span></code></pre>
</figure><p>For the moment I&rsquo;ll rely on Python to let me know if I try rendering a Markdown file that doesn&rsquo;t exist.</p>
<p>This will turn a single <code>.md.txt</code> file - the extension I&rsquo;m using to slide past Hugo&rsquo;s default Markdown handling - into HTML. I even get a nice <code>--help</code> blurb.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">$</span> python rendermd.py --help
</span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">Usage: rendermd.py [OPTIONS] SOURCE_PATH
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">  Transforms markdown into HTML with markdown-it-py.
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">Arguments:
</span></span></span><span class="line"><span class="cl"><span class="go">  SOURCE_PATH  [required]
</span></span></span><span class="line"><span class="cl"><span class="go"></span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="go">Options:
</span></span></span><span class="line"><span class="cl"><span class="go">  --install-completion [bash|zsh|fish|powershell|pwsh]
</span></span></span><span class="line"><span class="cl"><span class="go">                                  Install completion for the specified shell.
</span></span></span><span class="line"><span class="cl"><span class="go">  --show-completion [bash|zsh|fish|powershell|pwsh]
</span></span></span><span class="line"><span class="cl"><span class="go">                                  Show completion for the specified shell, to
</span></span></span><span class="line"><span class="cl"><span class="go">                                  copy it or customize the installation.
</span></span></span><span class="line"><span class="cl"><span class="go">  --help                          Show this message and exit.
</span></span></span></code></pre>
</figure><p>Now I start adding capabilities. If you see this post on the site, you&rsquo;ll know it worked.</p>
<h2 id="picking-a-preset-for-common-patterns">Picking a preset for common patterns</h2>
<p><code>markdown-it-py</code> provides predefined parser presets, allowing you to choose between common parsing patterns.</p>
<dl>
<dt><code>commonmark</code></dt>
<dd>the default; sticks with the core CommonMark specification; probably good enough for 80% of the Markdown that gets written</dd>
<dt><code>gfm-like</code></dt>
<dd>similar to Github-flavored Markdown; better if you need tables and URL transformation</dd>
<dt><code>js-default</code></dt>
<dd>similar to markdown-it base behavior; adds typographical replacements like &ldquo;smart quotes&rdquo; to the <code>gfm-like</code> set</dd>
<dt><code>zero</code></dt>
<dd>basically just breaks text into paragraphs; provides a bare minimum for you to build a highly custom Markdown parser</dd>
</dl>
<p>I went with <code>js_default</code> for my own baseline because it enables the most core features.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">make_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Return HTML string rendered from markdown source.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">md</span> <span class="o">=</span> <span class="n">MarkdownIt</span><span class="p">(</span><span class="s2">&#34;js-default&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">markdown</span><span class="p">)</span></span></span></code></pre>
</figure><h2 id="using-options-to-tune-your-parser">Using options to tune your parser</h2>
<p>Even with presets available, there are common tweaks that some folks can&rsquo;t live with and others can&rsquo;t live without. <code>markdown-it-py</code> wraps those up in a single dictionary of options.</p>
<dl>
<dt><code>maxNesting</code></dt>
<dd>recursion protection; think of it as a number for &ldquo;how fancy can I get with my Markdown?&rdquo;</dd>
<dt><code>html</code></dt>
<dd>allow raw HTML through</dd>
<dt><code>linkify</code></dt>
<dd>transform URLs into links</dd>
<dt><code>typographer</code></dt>
<dd>processes assorted <a href="https://markdown-it-py.readthedocs.io/en/latest/using.html#typographic-components">typographic conventions</a> including proper quote marks</dd>
<dt><code>quotes</code></dt>
<dd>what double and single quotes look like if you enable <code>typographer</code></dd>
<dt><code>xhtmlOut</code></dt>
<dd>ensure output is valid in the ancient XHTML dialect</dd>
<dt><code>breaks</code></dt>
<dd>treat line breaks in source as <code>&lt;br&gt;</code> elements</dd>
<dt><code>langPrefix</code></dt>
<dd>CSS class prefix for code blocks; <code>language-python</code>, <code>language-console</code> etc</dd>
<dt><code>highlight</code></dt>
<dd>a function to provide syntax highlighting for code blocks</dd>
</dl>
<p>Presets have default values for each of these options.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th><code>commonmark</code></th>
<th><code>gfm_like</code></th>
<th><code>js_default</code></th>
<th><code>zero</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>maxNesting</code></td>
<td><code>20</code></td>
<td><code>20</code></td>
<td><code>100</code></td>
<td><code>20</code></td>
</tr>
<tr>
<td><code>html</code></td>
<td>enabled</td>
<td>enabled</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td><code>linkify</code></td>
<td>—</td>
<td>enabled</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td><code>typographer</code></td>
<td>—</td>
<td>—</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td><code>quotes</code></td>
<td><code>“”‘’</code></td>
<td><code>“”‘’</code></td>
<td><code>“”‘’</code></td>
<td><code>“”‘’</code></td>
</tr>
<tr>
<td><code>xhtmlOut</code></td>
<td>enabled</td>
<td>enabled</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td><code>breaks</code></td>
<td>—</td>
<td>—</td>
<td>—</td>
<td>—</td>
</tr>
<tr>
<td><code>langPrefix</code></td>
<td><code>language-</code></td>
<td><code>language-</code></td>
<td><code>language-</code></td>
<td><code>language-</code></td>
</tr>
<tr>
<td><code>highlight</code></td>
<td>—</td>
<td>—</td>
<td>—</td>
<td>—</td>
</tr>
</tbody>
</table>
<p>I like fancy quotes. I expect URLs to display as links. I occasionally need to fall back to raw <abbr title="HyperText Markup Language">HTML</abbr>.But most importantly on this here blog: I insist on syntax highlighting.</p>
<h3 id="adding-a-highlight-function">Adding a highlight function</h3>
<p>Rather than decide for themselves how syntax highlighting is done, the markdown-it-py folks added a single option for us to hook in a function using <em>our</em> preferred approach.</p>
<p>The highlight function should take three arguments:</p>
<ul>
<li>the string of code to highlight</li>
<li>the lexer name</li>
<li>a dictionary of any additional attributes</li>
</ul>
<p>You could use whatever highlighting code you want. You could even have your function call out to an external program. I use <a href="https://pygments.org">Pygments</a> because it&rsquo;s familiar.</p>
<p>Also, I&rsquo;m going to ignore <code>attrs</code> for now. I rarely add special options to my code samples, so it&rsquo;s kind of wasted on me. So far.</p>
<p>Better make a note or something in case I forget that I&rsquo;m ignoring it.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">highlight_code</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Highlight a block of code&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">attrs</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">rich</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Ignoring </span><span class="si">{</span><span class="n">attrs</span><span class="si">=}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">lexer</span> <span class="o">=</span> <span class="n">get_lexer_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">highlight</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">lexer</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span></span></span></code></pre>
</figure><p>Okay, what&rsquo;s <code>make_html</code> look like now, with options set and highlighting function defined?</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">make_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Return HTML string rendered from markdown source.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">md</span> <span class="o">=</span> <span class="n">MarkdownIt</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;js-default&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;linkify&#34;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;html&#34;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;typographer&#34;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;highlight&#34;</span><span class="p">:</span> <span class="n">highlight_code</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">markdown</span><span class="p">)</span></span></span></code></pre>
</figure><p>Still a few pieces missing from <em>my</em> minimal toolkit. I need to dig a little deeper than I planned for a &ldquo;hey friends, markdown-it-py looks like fun&rdquo; post. But I at least want to render the kind of posts I would write.</p>
<p>For that I need to use some plugins. Good thing I installed <code>mdit-py-plugins</code>.</p>
<h2 id="adding-parser-functionality-with-plugins">Adding parser functionality with plugins</h2>
<p>mdit-py-plugins bundles many plugins into a single library. Today I need no plugins beyond what that library provides.</p>
<h3 id="definition-lists">definition lists</h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dl">Description lists</a> have been core to my HTML authoring flow since forever. I&rsquo;ll write the HTML myself if I have to. Fortunately, I don&rsquo;t have to, thanks to the <a href="https://mdit-py-plugins.readthedocs.io/en/latest/#definition-lists">deflist</a> plugin.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">mdit_py_plugins</span> <span class="kn">import</span> <span class="n">deflist</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">make_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...</span>
</span></span><span class="line"><span class="cl">    <span class="n">md</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">deflist</span><span class="o">.</span><span class="n">deflist_plugin</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">markdown</span><span class="p">)</span></span></span></code></pre>
</figure><p>Now I can write a definition list:</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">[`markdown-it-py`][markdown-it-py]
</span></span><span class="line"><span class="cl">: provides core markdown handling sufficient for common expected behavior
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[`linkify-it-py`][linkify-it-py]
</span></span><span class="line"><span class="cl">: enables recognition of URLs embedded in text strings; needs additional plugins
</span></span><span class="line"><span class="cl">  to <span class="ge">*do*</span> anything with those URLs
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[`mdit-py-plugins`][mdit-py-plugins]
</span></span><span class="line"><span class="cl">: provides a collection of core plugins that make <span class="sb">`markdown-it-py`</span> useful to a 
</span></span><span class="line"><span class="cl">  feature-happy person such as myself</span></span></code></pre>
</figure><p>And markdown-it-py produces a proper description list:</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">dl</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://pypi.org/project/markdown-it-py/&#34;</span><span class="p">&gt;&lt;</span><span class="nt">code</span><span class="p">&gt;</span>markdown-it-py<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>provides core markdown handling sufficient for common expected behavior<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://pypi.org/project/linkify-it-py/&#34;</span><span class="p">&gt;&lt;</span><span class="nt">code</span><span class="p">&gt;</span>linkify-it-py<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>Enables recognition of URLs embedded in text strings; needs additional plugins
</span></span><span class="line"><span class="cl">    to <span class="p">&lt;</span><span class="nt">em</span><span class="p">&gt;</span>do<span class="p">&lt;/</span><span class="nt">em</span><span class="p">&gt;</span> anything with those URLs<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://pypi.org/project/mdit-py-plugins/&#34;</span><span class="p">&gt;&lt;</span><span class="nt">code</span><span class="p">&gt;</span>mdit-py-plugins<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;</span>Provides a collection of core plugins that make <span class="p">&lt;</span><span class="nt">code</span><span class="p">&gt;</span>markdown-it-py<span class="p">&lt;/</span><span class="nt">code</span><span class="p">&gt;</span> useful to a
</span></span><span class="line"><span class="cl">    feature-happy person such as myself<span class="p">&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">dl</span><span class="p">&gt;</span></span></span></code></pre>
</figure><h3 id="admonition-blocks">admonition blocks</h3>
<p>So about a week ago, I was writing the first version of this post. I was nearly done. Then I got a little too tired and deleted the wrong file — without adding it to the repo first!</p>
<p>Oops.</p>
<p>Anyways, this redraft is less of a tutorial and more of a notes dump. I want to warn folks about that with a little blurb at the top. I can use the <a href="https://mdit-py-plugins.readthedocs.io/en/latest/#containers">containers</a> plugin for that. The plugin provides slots for validation and deeper processing. All I want today is a <code>&lt;div&gt;</code> with custom class. I can use CSS for the rest.</p>
<p>Using the container plugin with a <code>name</code> option provides that much.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">mdit_py_plugins</span> <span class="kn">import</span> <span class="n">container</span><span class="p">,</span> <span class="n">deflist</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">make_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ...</span>
</span></span><span class="line"><span class="cl">    <span class="n">md</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">container_plugin</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;note&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">markdown</span><span class="p">)</span></span></span></code></pre>
</figure><p>A <code>note</code> container looks like this in the markdown:</p>
<figure class="highlight">
  <pre tabindex="0"
    ><code class="language-" data-lang=""
      >::: note
This is my *note*.
:::</code></pre>
</figure><p>Without any additional configuration, it produces this HTML:</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;note&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>This is my <span class="p">&lt;</span><span class="nt">em</span><span class="p">&gt;</span>note<span class="p">&lt;/</span><span class="nt">em</span><span class="p">&gt;</span>.<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span></span></span></code></pre>
</figure><h2 id="good-enough">Good enough!</h2>
<p>Stopping here because it&rsquo;s good enough for what I wrote so far today. But there is plenty more to explore. markdown-it-py allows reviewing and manipulating parsed <a href="https://markdown-it-py.readthedocs.io/en/latest/using.html#the-token-stream">tokens</a> directly. Plus there&rsquo;s the whole MyST Markdown thing to explore.</p>
<p>But for now we&rsquo;re good. Let me drop in the Python code that transformed this post in the context of my Hugo site, then go convert the Typer logic to <a href="https://pyinvoke.org">Invoke</a>.</p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="ch">#!/usr/bin/python</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">frontmatter</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">rich</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">typer</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">markdown_it</span> <span class="kn">import</span> <span class="n">MarkdownIt</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">mdit_py_plugins</span> <span class="kn">import</span> <span class="n">container</span><span class="p">,</span> <span class="n">deflist</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pygments</span> <span class="kn">import</span> <span class="n">highlight</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pygments.formatters</span> <span class="kn">import</span> <span class="n">HtmlFormatter</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pygments.lexers</span> <span class="kn">import</span> <span class="n">get_lexer_by_name</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">highlight_code</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Highlight a block of code&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">attrs</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">rich</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;Ignoring </span><span class="si">{</span><span class="n">attrs</span><span class="si">=}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">lexer</span> <span class="o">=</span> <span class="n">get_lexer_by_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">highlight</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">lexer</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">make_html</span><span class="p">(</span><span class="n">markdown</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Return HTML string rendered from markdown source.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">md</span> <span class="o">=</span> <span class="n">MarkdownIt</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;js-default&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;linkify&#34;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;html&#34;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;typographer&#34;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;highlight&#34;</span><span class="p">:</span> <span class="n">highlight_code</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">md</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">deflist</span><span class="o">.</span><span class="n">deflist_plugin</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">md</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">container_plugin</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&#34;note&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">md</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">markdown</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">source_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;Transforms markdown into HTML with markdown-it-py.&#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">target_path</span> <span class="o">=</span> <span class="n">source_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;.md.txt&#34;</span><span class="p">,</span> <span class="s2">&#34;.html&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">post</span> <span class="o">=</span> <span class="n">frontmatter</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">source_path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">post</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="n">make_html</span><span class="p">(</span><span class="n">post</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">post</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&#34;format&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&#34;md&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">target_path</span><span class="p">,</span> <span class="s2">&#34;w&#34;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&#34;utf-8&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">frontmatter</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">post</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">typer</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">)</span></span></span></code></pre>
</figure>
  






  <hr>
  

  
    <section>
      <p>
        Got a comment? A question? More of a comment than a question?
      </p>
      <p>
        Talk to me about this page on:
        
          
            <a
              href="https://hackers.town/@randomgeek/107115143562134107"
              class="u-syndication label centered fa fa-mastodon"
              title="Mastodon"
              rel="syndication"
              aria-label="Mastodon"
            >
              <span class="sr-only">mastodon</span>
            </a>
          
        
          
        
      </p>
    </section>
  
  
<hr>
<div class="footer">
    
    
      <a class="previous-post" href="https://randomgeekery.org/post/2021/10/winget-is-pretty-slick-now/?ref=footer">
        <span style="font-weight:bold;">« Previous</span>
        <br>winget is pretty slick now
      </a>
    
    
      <div class="next-post">
        <a href="https://randomgeekery.org/post/2021/10/try-riv-if-you-like-vim-and-restructuredtext/?ref=footer">
          <span style="font-weight:bold;">Next »</span>
          <br>Try Riv if you like Vim and reStructuredText
        </a>
      </div>
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-it">What is it</a></li>
    <li><a href="#how-do-i-install-it">How do I install it</a></li>
    <li><a href="#how-do-i-use-it">How do I use it</a></li>
    <li><a href="#picking-a-preset-for-common-patterns">Picking a preset for common patterns</a></li>
    <li><a href="#using-options-to-tune-your-parser">Using options to tune your parser</a>
      <ul>
        <li><a href="#adding-a-highlight-function">Adding a highlight function</a></li>
      </ul>
    </li>
    <li><a href="#adding-parser-functionality-with-plugins">Adding parser functionality with plugins</a>
      <ul>
        <li><a href="#definition-lists">definition lists</a></li>
        <li><a href="#admonition-blocks">admonition blocks</a></li>
      </ul>
    </li>
    <li><a href="#good-enough">Good enough!</a></li>
  </ul>
</nav>
    </div>
</div>

  

        </div><script defer data-domain="randomgeekery.org" src="https://plausible.io/js/script.js"></script>
    </body>
</html>
