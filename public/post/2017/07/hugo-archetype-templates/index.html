<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.60856f0f2ed73fb3cd2820ee548c4698ffbc4d743736e852c0e27ce4f52dfd9c.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  

<meta property="og:url" content="https://randomgeekery.org/post/2017/07/hugo-archetype-templates/">
<meta property="og:title" content="Hugo Archetype Templates">
<meta name="twitter:title" content="Hugo Archetype Templates">


  <meta name="twitter:site" content="@brianwisti">



  
    <meta name="twitter:description" content="I try out archetype templates from the card/Hugo static site generator, smoothing the whole thing into my workflow with a bash script.
Hugo Archetypes Hugo archetypes are templates that Hugo uses when you tell it to create new content. Hugo allows both default archetypes and section archetypes for content that belongs in a particular section (such as Posts or Crafts).
As of release v0.24, archetypes are full templates. You can use variables and functions to fine-tune details of your archetype.">
    <meta property="og:description" content="I try out archetype templates from the card/Hugo static site generator, smoothing the whole thing into my workflow with a bash script.
Hugo Archetypes Hugo archetypes are templates that Hugo uses when you tell it to create new content. Hugo allows both default archetypes and section archetypes for content that belongs in a particular section (such as Posts or Crafts).
As of release v0.24, archetypes are full templates. You can use variables and functions to fine-tune details of your archetype.">
  



<title itemprop="name">Hugo Archetype Templates - Random Geekery</title>
<meta property="og:title" content=Hugo&#32;Archetype&#32;Templates&#32;-&#32;Random&#32;Geekery />
<meta name="twitter:title" content=Hugo&#32;Archetype&#32;Templates&#32;-&#32;Random&#32;Geekery />
<meta itemprop="name" content=Hugo&#32;Archetype&#32;Templates&#32;-&#32;Random&#32;Geekery />
<meta name="application-name" content=Hugo&#32;Archetype&#32;Templates&#32;-&#32;Random&#32;Geekery />
<meta property="og:site_name" content="Random Geekery" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="https://randomgeekery.org/post/2017/07/hugo-archetype-templates/" />
<link rel="canonical" href="https://randomgeekery.org/post/2017/07/hugo-archetype-templates/" itemprop="url" />
<meta name="url" content="https://randomgeekery.org/post/2017/07/hugo-archetype-templates/" />
<meta name="twitter:url" content="https://randomgeekery.org/post/2017/07/hugo-archetype-templates/" />
<meta property="og:url" content="https://randomgeekery.org/post/2017/07/hugo-archetype-templates/" />


<meta property="og:updated_time" content=1007-01-12T70:00:17-0700 />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://randomgeekery.org/sitemap.xml' />

  <link
      rel="alternate"
      type="application/rss+xml"
    
        href="/index.xml"
    
      title="Random Geekery"/>



<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Random Geekery" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.121.2">


    
    

<link
    rel="stylesheet"
    href="/css/style.fe9735814e6394fb590ff4fd2eb036a13152e6808ad90dd06ba181d89087b5d3.css"
    integrity="sha256-/pc1gU5jlPtZD/T9LrA2oTFS5oCK2Q3Qa6GB2JCHtdM=" 
    crossorigin="anonymous">


</head>

    <body class="">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="https://randomgeekery.org">
                <h1>Random Geekery</h1>
            </a>
        
    </h1>
    <p class="lead">
    Collecting my attempts to improve at tech, art, and life
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
      
        <li class="bullet">
          <a href="/post/">Posts</a>
        </li>
      
        <li class="bullet">
          <a href="/card/">Cards</a>
        </li>
      
        <li class="bullet">
          <a href="/now/">Now</a>
        </li>
      
        <li class="bullet">
          <a href="/follow/">Follow</a>
        </li>
      
        <li class="bullet">
          <a href="/neighborhood/">Neighborhood</a>
        </li>
      
        <li class="bullet">
          <a href="/config/">Config</a>
        </li>
      
    </ul>
</nav>

        
  <div class="related">
    <div class="related-posts">
      <h3>Related</h3>
      <ul>
        
          <li><a href="/post/2017/09/full-content-hugo-feeds/">Full Content Hugo Feeds</a></li>
        
          <li><a href="/post/2021/08/trying-a-thing-with-neovim/">trying a thing with neovim</a></li>
        
          <li><a href="/post/2021/04/still-pondering-new-site-approaches/">Still pondering new site approaches</a></li>
        
          <li><a href="/post/2020/05/alias-templates-in-hugo/">Alias Templates in Hugo</a></li>
        
          <li><a href="/post/2020/05/querying-hugo-content-with-python/">Querying Hugo Content With Python</a></li>
        
      </ul>
    </div>
  </div>



        
















        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Brian Wisti. All rights reserved.
</p>
<p class="footnote">
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License
  </a>.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <nav class="masthead">
    <ul>
    
  
    
  
    
  
    
  

    <li><a href="https://randomgeekery.org/">Random Geekery</a></li>
  

    <li><a href="https://randomgeekery.org/post/">Posts</a></li>
  

    <li><a href="https://randomgeekery.org/post/2017/">2017</a></li>
  

    <li><a class="active" href="https://randomgeekery.org/post/2017/07/hugo-archetype-templates/">Hugo Archetype Templates</a></li>
</nav>



  <div class="info">
    <h1 class="post-title">
        <a href="https://randomgeekery.org/post/2017/07/hugo-archetype-templates/">Hugo Archetype Templates</a>
    </h1>
    
        <time datetime="2017-07-01T00:00:00-0700" class="post-date">
            July 1, 2017
        </time>
    
    
    <ul class="tags">
        
        <li class="tag-hugo">
            <a href="https://randomgeekery.org/tags/hugo">hugo</a>
        </li>
        
        <li class="tag-site">
            <a href="https://randomgeekery.org/tags/site">site</a>
        </li>
        
        <li class="tag-bash">
            <a href="https://randomgeekery.org/tags/bash">bash</a>
        </li>
        
        <li class="tag-tools">
            <a href="https://randomgeekery.org/tags/tools">tools</a>
        </li>
        
    </ul>
    
    
    
    
    
    
</div>

  <p><figure>
    <img src="/../../../attachments/img/2017/cover-2017-07-01.png" alt="attachments/img/2017/cover-2017-07-01.png"/></figure></p>
<p>I try out archetype templates from the <a href="/card/hugo/">card/Hugo</a> static site generator, smoothing the
whole thing into my workflow with a bash script.</p>
<h2 id="hugo-archetypes">Hugo Archetypes</h2>
<p><a href="http://gohugo.io/content/archetypes/">Hugo archetypes</a> are templates that Hugo uses when you tell it to create new content. Hugo allows both default archetypes and <a href="http://gohugo.io/content/archetypes/#section-archetypes">section archetypes</a> for content that belongs in a particular section (such as Posts or Crafts).</p>
<p>As of release <a href="https://github.com/gohugoio/hugo/releases/tag/v0.24">v0.24</a>, archetypes are full templates. You can use <a href="http://gohugo.io/templates/variables/">variables</a> and <a href="http://gohugo.io/templates/functions/">functions</a>  to fine-tune details of your archetype. This gives me a chance to simplify my content creation workflow.</p>
<h3 id="my-default-archetype-template">My Default Archetype Template</h3>
<p>My archetype focuses on <a href="http://gohugo.io/content/front-matter/">front matter</a>. Since the site sections share taxonomy rules, I use a single default archetype.</p>
<p><strong><code>archetypes/default.md</code></strong></p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-markdown" data-lang="markdown"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">title: &#34;{{ replace .TranslationBaseName &#34;-&#34; &#34; &#34; | title }}&#34;
</span></span><span class="line"><span class="cl">date: {{ dateFormat &#34;2006-01-02&#34; .Date }}
</span></span><span class="line"><span class="cl">year: &#34;{{ dateFormat &#34;2006&#34; .Date }}&#34;
</span></span><span class="line"><span class="cl">draft: true
</span></span><span class="line"><span class="cl">tags:
</span></span><span class="line"><span class="cl"><span class="k">-</span>
</span></span><span class="line"><span class="cl">categories:
</span></span><span class="line"><span class="cl"><span class="k">-</span>
</span></span><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">tl;dr
</span></span><span class="line"><span class="cl"><span class="c">&lt;!-- more --&gt;</span></span></span></code></pre>
</figure><h3 id="notes">Notes</h3>
<ul>
<li>Hugo provides <code>title</code> and <code>date</code> if you leave them out. My <code>title</code> looks the   same as the default, but I add it to the template to remember what   transformations are being done.</li>
<li>I prefer a specific format for date in my front matter, so I add my own   version.</li>
<li>I use a <code>year</code> taxonomy for archives.</li>
<li>Everything is a <code>draft</code> until I specify otherwise.</li>
<li>All my content should be tagged and categorized.</li>
<li>I try to summarize the post in an initial paragraph that gets shown in list   views.</li>
<li>That last line is really <code>&lt;!&ndash;more&ndash;&gt;</code>  with no spaces, but if I skip the spaces here Hugo thinks I want another summary block in this post.</li>
</ul>
<p>That&rsquo;s good enough for <code>hugo new</code>. Since I have <code>newContentEditor</code> set to &ldquo;vim&rdquo; in my <a href="http://gohugo.io/overview/configuration/">config</a>, Hugo opens the new file in my editor after creating it.</p>
<figure class="highlight">
  <pre tabindex="0"
    ><code class="language-" data-lang=""
      >$ hugo new post/2017/23-things-i-hate-about-lists.md</code></pre>
</figure><p>My workflow is a little more complicated than &ldquo;create a draft and edit it&rdquo; though.</p>
<h2 id="my-workflow">My Workflow</h2>
<p>I create and edit site content in its own git branch. With multiple drafts going at any one time, using separate branches lets me focus on the current content.</p>
<p>I follow these steps every time I add a new post.</p>
<ol>
<li>Create a branch</li>
<li>Add a draft content file</li>
<li>Start editing the draft file!</li>
</ol>
<p>I can ignore the publishing part of the workflow for today, which involves running some tests and pushing to <a href="https://aws.amazon.com/s3/">AWS S3</a>. That deserves its own post.</p>
<p>I originally automated this with a small Ruby script which would create the branch and generate a content file for me. The file generating code is not needed now that Hugo archetypes are templates. My small, slightly clunky Ruby script can be replaced with a smaller, hopefully less clunky <a href="https://www.gnu.org/software/bash/">Bash</a> script.</p>
<p><strong><code>scripts/add</code></strong></p>
<figure class="highlight">
  <pre tabindex="0" class="chroma"
    ><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1"># stricter bash</span>
</span></span><span class="line"><span class="cl"><span class="c1">#  see http://redsymbol.net/articles/unofficial-bash-strict-mode/</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> -euo pipefail
</span></span><span class="line"><span class="cl"><span class="nv">IFS</span><span class="o">=</span><span class="s1">$&#39;\n\t&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">SECTION</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="si">}</span>
</span></span><span class="line"><span class="cl"><span class="nv">TITLE</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="si">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="o">[[</span> -z <span class="s2">&#34;</span><span class="nv">$SECTION</span><span class="s2">&#34;</span> <span class="o">||</span> -z <span class="s2">&#34;</span><span class="nv">$TITLE</span><span class="s2">&#34;</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s2">&#34;Usage: </span><span class="nv">$0</span><span class="s2"> SECTION TITLE&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">exit</span> <span class="m">1</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">TITLE_SLUG</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span><span class="nb">echo</span> -n <span class="s2">&#34;</span><span class="nv">$TITLE</span><span class="s2">&#34;</span> <span class="p">|</span> sed -e <span class="s1">&#39;s/[^[:alnum:]]/-/g&#39;</span> <span class="p">|</span> tr -s <span class="s1">&#39;-&#39;</span> <span class="p">|</span> tr A-Z a-z<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">YEAR</span><span class="o">=</span><span class="s2">&#34;</span><span class="k">$(</span>date +<span class="s2">&#34;%Y&#34;</span><span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">STUB</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$SECTION</span><span class="s2">/</span><span class="nv">$YEAR</span><span class="s2">/</span><span class="nv">$TITLE_SLUG</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">git checkout -b <span class="s2">&#34;</span><span class="nv">$STUB</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">hugo new <span class="s2">&#34;</span><span class="nv">$STUB</span><span class="s2">.md&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># newContentEditor set in Hugo config, expect Vim here.</span></span></span></code></pre>
</figure><h3 id="notes-1">Notes</h3>
<p>Applying details like <a href="http://redsymbol.net/articles/unofficial-bash-strict-mode/">unofficial strict mode</a> is part my process for getting more comfortable scripting Bash. The bit that&rsquo;s important to me: this script fails loudly on encountering bad variables and bad processes.</p>
<p>The fun little slug-generating <code>sed</code> and <code>tr</code> pipe came directly from <a href="https://bigmachine.io/products/the-imposters-handbook/">The Imposter&rsquo;s Handbook</a>. I know that I will lose punctuation and unusual capitalization between this and Hugo&rsquo;s manipulation of <code>.TranslationBaseName</code>. It encourages me to keep titles simple. The title can edited in the front matter later if it is that important to me.</p>
<p><a href="https://www.gnu.org/software/coreutils/manual/html_node/date-invocation.html#date-invocation"><code>date</code></a> comes from <a href="https://www.gnu.org/software/coreutils/manual/html_node/index.html#Top">GNU Coreutils</a>. I knew I could use <code>date</code> to get a simple description of the date. I recently discovered that it also accepts a format string! Turns out that GNU Coreutils gives the shell quite a bit of functionality that I usually ran to some programming language and its libraries for. Being self-taught produces weird gaps in my knowledge.</p>
<figure class="highlight">
  <pre tabindex="0"
    ><code class="language-" data-lang=""
      >$ ./script/add post &#34;23 Things I Hate About Lists&#34;
Switched to a new branch &#39;post/2017/23-things-i-hate-about-lists&#39;
/home/brian/Sites/rgb-hugo/content/post/2017/23-things-i-hate-about-lists.md created</code></pre>
</figure><p>Excuse me while I go write my masterpiece. Have fun!</p>

  






  <hr>
  

  
    <section>
      <p>
        Got a comment? A question? More of a comment than a question?
      </p>
      <p>
        Talk to me about this page on:
        
          
        
      </p>
    </section>
  
  
<hr>
<div class="footer">
    
    
      <a class="previous-post" href="https://randomgeekery.org/post/2017/06/my-weston-hat/?ref=footer">
        <span style="font-weight:bold;">« Previous</span>
        <br>My Weston Hat
      </a>
    
    
      <div class="next-post">
        <a href="https://randomgeekery.org/post/2017/07/my-stripes-and-stripes-forever-scarf/?ref=footer">
          <span style="font-weight:bold;">Next »</span>
          <br>My Stripes (And Stripes) Forever Scarf
        </a>
      </div>
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#hugo-archetypes">Hugo Archetypes</a>
      <ul>
        <li><a href="#my-default-archetype-template">My Default Archetype Template</a></li>
        <li><a href="#notes">Notes</a></li>
      </ul>
    </li>
    <li><a href="#my-workflow">My Workflow</a>
      <ul>
        <li><a href="#notes-1">Notes</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

  

        </div><script defer data-domain="randomgeekery.org" src="https://plausible.io/js/script.js"></script>
    </body>
</html>
