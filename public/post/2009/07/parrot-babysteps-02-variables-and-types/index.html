<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.60856f0f2ed73fb3cd2820ee548c4698ffbc4d743736e852c0e27ce4f52dfd9c.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  

<meta property="og:url" content="https://randomgeekery.org/post/2009/07/parrot-babysteps-02-variables-and-types/">
<meta property="og:title" content="Parrot Babysteps 02 - Variables and Types">
<meta name="twitter:title" content="Parrot Babysteps 02 - Variables and Types">


  <meta name="twitter:site" content="@brianwisti">



  
    <meta name="twitter:description" content="I&rsquo;ve always felt that learning the core types of a platform is boring. Once you&rsquo;ve learned a few languages, you know the difference between an integer and a floating point number, what a string is, and have a general idea for how you work with each of them. You mainly care about the details of how you work with them in your new platform. It is important to learn these details, though.">
    <meta property="og:description" content="I&rsquo;ve always felt that learning the core types of a platform is boring. Once you&rsquo;ve learned a few languages, you know the difference between an integer and a floating point number, what a string is, and have a general idea for how you work with each of them. You mainly care about the details of how you work with them in your new platform. It is important to learn these details, though.">
  



<title itemprop="name">Parrot Babysteps 02 - Variables and Types - Random Geekery</title>
<meta property="og:title" content=Parrot&#32;Babysteps&#32;02&#32;-&#32;Variables&#32;and&#32;Types&#32;-&#32;Random&#32;Geekery />
<meta name="twitter:title" content=Parrot&#32;Babysteps&#32;02&#32;-&#32;Variables&#32;and&#32;Types&#32;-&#32;Random&#32;Geekery />
<meta itemprop="name" content=Parrot&#32;Babysteps&#32;02&#32;-&#32;Variables&#32;and&#32;Types&#32;-&#32;Random&#32;Geekery />
<meta name="application-name" content=Parrot&#32;Babysteps&#32;02&#32;-&#32;Variables&#32;and&#32;Types&#32;-&#32;Random&#32;Geekery />
<meta property="og:site_name" content="Random Geekery" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="https://randomgeekery.org/post/2009/07/parrot-babysteps-02-variables-and-types/" />
<link rel="canonical" href="https://randomgeekery.org/post/2009/07/parrot-babysteps-02-variables-and-types/" itemprop="url" />
<meta name="url" content="https://randomgeekery.org/post/2009/07/parrot-babysteps-02-variables-and-types/" />
<meta name="twitter:url" content="https://randomgeekery.org/post/2009/07/parrot-babysteps-02-variables-and-types/" />
<meta property="og:url" content="https://randomgeekery.org/post/2009/07/parrot-babysteps-02-variables-and-types/" />


<meta property="og:updated_time" content=11007-11-12T70:00:09-0700 />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://randomgeekery.org/sitemap.xml' />

  <link
      rel="alternate"
      type="application/rss+xml"
    
        href="/index.xml"
    
      title="Random Geekery"/>



<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Random Geekery" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.121.2">


    
    

<link
    rel="stylesheet"
    href="/css/style.15361b4c24f30033251cd8947e34c41e754c9461dc117cab390ac04e365faec3.css"
    integrity="sha256-FTYbTCTzADMlHNiUfjTEHnVMlGHcEXyrOQrATjZfrsM=" 
    crossorigin="anonymous">


</head>

    <body class="">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="https://randomgeekery.org">
                <h1>Random Geekery</h1>
            </a>
        
    </h1>
    <p class="lead">
    Collecting my attempts to improve at tech, art, and life
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
      
        <li class="bullet">
          <a href="/follow/">Follow</a>
        </li>
      
        <li class="bullet">
          <a href="/now/">Now</a>
        </li>
      
    </ul>
</nav>

        
  <div class="related">
    <div class="related-posts">
      <h3>Related</h3>
      <ul>
        
          <li><a href="/post/2009/12/parrot-babysteps-08-testing-with-testmore/">Parrot Babysteps 08 - Testing With Test::More</a></li>
        
          <li><a href="/post/2009/10/parrot-babysteps-07-writing-subroutines/">Parrot Babysteps 07 - Writing Subroutines</a></li>
        
          <li><a href="/post/2009/10/parrot-babysteps-06-files-and-hashes/">Parrot Babysteps 06 - Files and Hashes</a></li>
        
          <li><a href="/post/2009/09/parrot-babysteps-05-more-about-arrays/">Parrot Babysteps 05 - More About Arrays</a></li>
        
          <li><a href="/post/2009/09/parrot-babysteps-04-adding-command-line-arguments/">Parrot Babysteps 04 - Adding Command Line Arguments</a></li>
        
      </ul>
    </div>
  </div>



        
















        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Brian Wisti. All rights reserved.
</p>
<p class="footnote">
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License
  </a>.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <nav class="masthead">
    <ul>
    
  
    
  
    
  

    <li><a href="https://randomgeekery.org/">Random Geekery</a></li>
  

    <li><a href="https://randomgeekery.org/post/">Posts</a></li>
  

    <li><a class="active" href="https://randomgeekery.org/post/2009/07/parrot-babysteps-02-variables-and-types/">Parrot Babysteps 02 - Variables and Types</a></li>
</nav>



  <div class="info">
    <h1 class="post-title">
        <a href="https://randomgeekery.org/post/2009/07/parrot-babysteps-02-variables-and-types/">Parrot Babysteps 02 - Variables and Types</a>
    </h1>
    
        <time datetime="2009-07-11T00:00:00-0700" class="post-date">
            July 11, 2009
        </time>
    
    
    <ul class="tags">
        
        <li class="tag-parrot">
            <a href="https://randomgeekery.org/tags/parrot">parrot</a>
        </li>
        
        <li class="tag-learn">
            <a href="https://randomgeekery.org/tags/learn">learn</a>
        </li>
        
        <li class="tag-coolnamehere">
            <a href="https://randomgeekery.org/tags/coolnamehere">coolnamehere</a>
        </li>
        
    </ul>
    
    
    
    
        <p class="seriesname">
            Series: <a href="https://randomgeekery.orgseries/">[Parrot Babysteps]</a>
        </p>
    
    
    
</div>

  <p>I&rsquo;ve always felt that learning the core types of a platform is boring. Once you&rsquo;ve learned a few languages, you know the difference between an integer and a floating point number, what a string is, and have a general idea for how you work with each of them. You mainly care about the details of how you work with them in your new platform. It is important to learn these details, though.</p>
<p>We already looked at variables when we wrote the simple &ldquo;Hello, World&rdquo; program in <a href="/post/2009/07/parrot-babysteps-01-getting-started/">parrot-babysteps-01-getting-started</a>.  We looked at the different variable types and the registers that <a href="/card/parrot/">Parrot</a> uses to hold them. Today we&rsquo;re going to dive a  little deeper into variables and types so that you can get the basic idea of what  you can do with variables in Parrot. I won&rsquo;t be digging <em>too</em> deep, though. In particular, I will be talking as little about PMCs as I can. It&rsquo;s just too much for where we&rsquo;re at today.</p>
<h2 id="variable-names">Variable Names</h2>
<p>Names become important when you&rsquo;re using variables. Good names add documentation by telling people who look at your code what a given variable is going to be used for. Parrot has two naming schemes: one for register variables, and another for everything else.</p>
<h3 id="register-variable-names">Register Variable Names</h3>
<p>Register variable rules are easy to remember. First comes the register being used, then one or more digits.</p>
<pre tabindex="0"><code>&lt;register&gt;&lt;identifier&gt;
</code></pre><p>The registers are named with a dollar sign (<code>$</code>), then an upper case letter indicating what types are held in that register:</p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>$I</td>
<td>Integers</td>
</tr>
<tr>
<td>$N</td>
<td>Numbers (decimal values)</td>
</tr>
<tr>
<td>$S</td>
<td>Strings</td>
</tr>
<tr>
<td>$P</td>
<td>Polymorphic Containers</td>
</tr>
</tbody>
</table>
<p>I thought that the number after the register identifier was something that tells Parrot something especially meaningful, like which slot it&rsquo;s using or something. Turns out that&rsquo;s not the case, or at least not in quite the way I thought it was.</p>
<pre tabindex="0"><code>#!parrot
# example-02-01.pir
.sub main :main
  $I01 = 10
  $I1  = 20
  say $I01
  say $I1
.end
</code></pre><p><code>01</code> and <code>1</code> are the same number according to the numbering systems that I&rsquo;m familiar with. Look what happens when you run it, though.</p>
<pre tabindex="0"><code>$ parrot example-02-01.pir
10
20
</code></pre><p>So the numbers are just a sequence of characters identifying the variable for the register. They don&rsquo;t indicate order or anything else. The register takes care of storing variables and lets you use those numbers however you want. But if I see you <code>$I01</code> and <code>$I1</code> in your code without a good reason I might have to slap you. Well, no. I will be disappointed, though.</p>
<p>I&rsquo;ve already said that I prefer <code>.local</code> variables. They&rsquo;re more explicit than using the register, and I&rsquo;ve generally found that more explicit code is easier to read and maintain. Nevertheless, register variables have a certain charm. You don&rsquo;t have to declare them, for starters. Just say &ldquo;Hey, set <code>$I1</code> to <code>10</code>&rdquo; and move on to the next instruction. You also don&rsquo;t have to spend any time coming up with a clever name. As long as <em>you</em> remember what the numbers mean and document it somewhere, it&rsquo;s all good. That makes register variables ideal for short chunks of code.</p>
<p>It does get confusing as your program grows larger or if you are like me and can quickly forget what you were using a variable for. That&rsquo;s when <code>.local</code> variables become valuable.</p>
<h3 id="local-variable-names"><code>.local</code> Variable Names</h3>
<p>Local variables are more complicated than register variables, but they have additional features which make them useful. I&rsquo;ve already talked about how the names can be made meaningful. They also only exist in the subroutine where they are defined, which is a lifesaver in large programs. The format of a local variable declaration makes it easy to understand when you will be using it and what you plan to use it for.</p>
<p>Local variables are declared with the <code>.local</code> directive, followed by a type identifier and finally the name of the variable.</p>
<pre tabindex="0"><code>.local &lt;type-identifier&gt; &lt;name&gt;
</code></pre><p>I briefly described the type identifiers last time, but here they are again.</p>
<table>
<thead>
<tr>
<th>Identifier</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td>integer</td>
</tr>
<tr>
<td><code>num</code></td>
<td>number (decimal values)</td>
</tr>
<tr>
<td><code>string</code></td>
<td>string</td>
</tr>
<tr>
<td><code>pmc</code></td>
<td>Polymorphic container</td>
</tr>
</tbody>
</table>
<p>Now for the name. It needs to start with a letter or underscore (<code>_</code>) character, and the rest must only contain letters, digits, or underscores. Variable names are case sensitive, so <code>year</code>, <code>YEAR</code>, and <code>Year</code> all describe different variables. A variable name may have any length, but keep it reasonable.</p>
<p>The only other rule to remember about variable names is that they may not be <em>reserved words</em>. Reserved words have special meaning to Parrot, and it will complain if you use one of them for your own nefarious ends. The list of reserved words is  delightfully small.</p>
<ul>
<li><code>goto</code></li>
<li><code>if</code></li>
<li><code>int</code></li>
<li><code>null</code></li>
<li><code>num</code></li>
<li><code>pmc</code></li>
<li><code>string</code></li>
<li><code>unless</code></li>
</ul>
<p>Reiterating some <a href="/post/2002/06/simple-types-in-python/">old guidelines</a> for variable names.</p>
<ul>
<li>Use descriptive names rather than abbreviations or inside jokes. When you are naming a variable that holds the radius of a circle, it is usually better to use <code>radius</code> than <code>r</code> or <code>halfway_there</code></li>
<li>Use a name that indicates what the variable will be used for.  <code>radius</code> is much better than <code>fnord</code> for describing the radius of a circle. <em>(plus, <code>fnord</code> breaks the &ldquo;no inside jokes&rdquo; guideline)</em></li>
<li>Constant variables are often indicated by having the name be in all upper case letters.</li>
<li>Find a balance between names that are too long or too short.
* <em>Too short</em> might be <code>n</code>
* <em>Too long</em> might be <code>name_of_my_favorite_customer_in_walla_walla_washington</code>
* <em>Just right</em> might be <code>name</code> or <code>customer_name</code></li>
<li>Then again, it&rsquo;s okay to bend the guidelines in favor of common terms. If you are writing code to figure out the distance between two points, then <code>x1, y1, x2,</code> and <code>y2</code> are perfectly sensible identifiers. And maybe <code>r</code> isn&rsquo;t always a bad idea for <code>radius</code>. Use your own judgment.</li>
</ul>
<p>I break these guidelines sometimes, but at least I think about it before I do.</p>
<h4 id="assignment">Assignment</h4>
<p>Remember that declaring a local variable and assigning a value to it are two different actions, and require two separate instructions.</p>
<pre tabindex="0"><code>#!parrot
# example-02-02.pir
.sub main :main
  .local int year
  year = 2010
  say year
.end
</code></pre><h2 id="const-variables"><code>.const</code> Variables</h2>
<p>Actually, that earlier guideline about constant variables reminded me: Parrot has a directive for declaring and assigning a value for a local constant variable. Use the <code>.const</code> directive when you want a variable that won&rsquo;t somehow change in value after you&rsquo;ve created it.</p>
<pre tabindex="0"><code>.const &lt;type-identifier&gt; &lt;name&gt; = &lt;value&gt;
</code></pre><p>Here&rsquo;s an example of <code>.const</code> in action: calculating the area of a circle with a radius of 10 units.</p>
<pre tabindex="0"><code>#!parrot
# example-02-03.pir
.sub main :main
  .const num PI     = 3.14159
  .const num RADIUS = 10
  .local num area

  print &#34;Radius: &#34;
  say RADIUS

  # Area of a circle: PI * RADIUS * RADIUS
  area  = PI
  area *= RADIUS
  area *= RADIUS
  print &#34;Area: &#34;
  say area
.end
</code></pre><p><code>PI</code> and <code>RADIUS</code> are the constants in this program. We define them once and never need to change them again. Area, on the other hand, is a local because it needs to be touched several times to get the final value.</p>
<pre tabindex="0"><code>$ parrot example-02-03.pir
Radius: 10
Area: 314.159
</code></pre><p>This is where developers experienced with other languages should see the low-level nature of PIR. Those operators correspond to opcodes, and PIR only wants to see one opcode per statement. That&rsquo;s why the formula is broken down into distinct steps.</p>
<p>I think we&rsquo;ve got a solid grip on declaration and basic usage of both local and register variables. On to the types.</p>
<h2 id="variable-types">Variable Types</h2>
<p>You know what the types are: integers, numbers, strings, and polymorphic containers. You also know the rough outline of what they look like.</p>
<h3 id="numeric-types">Numeric Types</h3>
<p>When you need to do math, it&rsquo;s time for integers and numbers.</p>
<h4 id="integers">Integers</h4>
<p>Integers are whole numbers such as <code>3</code>, <code>94</code>, and <code>-48183</code>. They are signed, which means that you can create positive or negative values. Each integer takes up the same amount of memory. How much memory do they take up? Well, that depends on your system and how Parrot was compiled. 32-bit Parrot uses 4 bytes for integers, while it&rsquo;s presumably 8 bytes on 64-bit Parrot. The <a href="http://docs.parrot.org/parrot/latest/html/src/dynoplibs/sys.ops.html"><code>sysinfo</code></a>   opcode can tell us for sure.</p>
<pre tabindex="0"><code>#!parrot
# example-02-04.pir
.loadlib &#39;sys_ops&#39;
.include &#39;sysinfo.pasm&#39;

.sub &#39;main&#39; :main
    $I0 = sysinfo .SYSINFO_PARROT_INTSIZE
    print $I0
    say &#34; bytes in an integer on this machine&#34;
.end
</code></pre><p>Parrot keeps only the most important opcodes in its core. A question like &ldquo;how many bytes are in an integer?&rdquo; is just not considered all that important most of the time. The <code>.loadlib</code> directive allows us to load special Parrot bytecode libraries that have been compiled so that they are more efficient on the virtual machine. The <code>.include</code> directive lets us use code that is written in PIR but has not been compiled or otherwise treated in any special way. There are fine differences between them, but I think that&rsquo;s the important one. We will often use the <code>.loadlib</code> and <code>.include</code> directives to grab functionality that is not available in core Parrot.</p>
<p>What does this code tell us?</p>
<pre tabindex="0"><code>$ parrot example-02-04.pir
4 bytes in an integer on this machine
</code></pre><p>I&rsquo;m using a 32-bit Parrot, which gives my integers a range of <code>-2,147,483,648</code> to <code>2,147,483,647</code>. That will be more than sufficient for our purposes, and there&rsquo;s the <a href="http://docs.parrot.org/parrot/latest/html/src/pmc/bigint.pmc.html"><code>BigInt</code></a> PMC for those days when we need truly huge integers.</p>
<p>Most often you&rsquo;ll create integers using the 10-based system, but every once in a while it will be more informative to use base 8, base 16, or even binary. Parrot supports that.</p>
<pre tabindex="0"><code>#!parrot
# example-02-05.pir
.sub main :main
    $I0 = 10   # decimal (base 10)
    say $I0
    $I0 = 0o10 # octal (base 8)
    say $I0
    $I0 = 0x10 # hexadecimal (base 16)
    say $I0
    $I0 = 0b10 # binary (base 2)
    say $I0
.end
</code></pre><p>Now I can see the value described by <code>10</code> in decimal, octal, hex, and binary. My life is complete.</p>
<pre tabindex="0"><code>$ parrot example-02-05.pir
10
8
16
2
</code></pre><p>That wasn&rsquo;t as fulfilling as I&rsquo;d hoped. Perhaps my life is not complete after all. I might as well move on to floating point numbers.</p>
<h4 id="numbers">Numbers</h4>
<p>The Number type is used by Parrot to represent <a href="http://en.wikipedia.org/wiki/Floating_point">floating point values</a>. These are more or less the same as the decimal numbers you may be more familiar with.</p>
<p>Like integers, numbers may be positive or negative and have a range that depends on their size. <code>sysinfo</code> can get that size for us.</p>
<pre tabindex="0"><code>#!parrot
# example-02-06.pir
.loadlib &#39;sys_ops&#39;
.include &#39;sysinfo.pasm&#39;

.sub &#39;main&#39; :main
    $I0 = sysinfo .SYSINFO_PARROT_FLOATSIZE
    print $I0
    say &#34; bytes in a number on this machine&#34;
.end
</code></pre><p>Now we know how much space is used for a number in Parrot.</p>
<pre tabindex="0"><code>$ parrot example-02-06.pir
8 bytes in a number on this machine
</code></pre><p>What does that mean, though? Integers are easy: 4 bytes is 32 bits is somewhere over 4 billion possible values. With numbers - well, I have no idea really. The range is &ldquo;some insanely small value&rdquo; to &ldquo;some insanely big value&rdquo;. Look at Wikipedia&rsquo;s entry on <a href="https://en.wikipedia.org/wiki/Double_precision">double precision floating point</a> if you really want to know.</p>
<p>You can use ordinary decimal values or scientific notation for number values.</p>
<pre tabindex="0"><code>#!parrot
$N0 = 3.1415926
$N1 = 6.0221415e+23
</code></pre><p>What can you do with numbers?</p>
<h4 id="numeric-operators-and-opcodes">Numeric Operators and Opcodes</h4>
<p>Operators in PIR provide a convenient and fairly readable shorthand for opcode instructions. It&rsquo;s generally easier for me to remember <code>sum = a + b</code> than <code>add sum, a, b</code>. If the second option is more readable for you, that&rsquo;s great! It&rsquo;s not for me.</p>
<p>There are many operators, but here are what I think of as the core operators for dealing with numbers.</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Opcode</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>=</code></td>
<td><code>set</code></td>
<td>assign a value</td>
</tr>
<tr>
<td><code>*</code></td>
<td><code>mul</code></td>
<td>multiply</td>
</tr>
<tr>
<td><code>/</code></td>
<td><code>div</code></td>
<td>divide</td>
</tr>
<tr>
<td><code>+</code></td>
<td><code>add</code></td>
<td>add</td>
</tr>
<tr>
<td><code>-</code></td>
<td><code>sub</code></td>
<td>subtract</td>
</tr>
<tr>
<td><code>*=</code></td>
<td><code>mul</code></td>
<td>multiply and assign</td>
</tr>
<tr>
<td><code>/=</code></td>
<td><code>div</code></td>
<td>divide and assign</td>
</tr>
<tr>
<td><code>+=</code></td>
<td><code>add</code></td>
<td>add and assign</td>
</tr>
<tr>
<td><code>-=</code></td>
<td><code>sub</code></td>
<td>subtract and assign</td>
</tr>
</tbody>
</table>
<p>Just for laughs - and to see how the operators fill in for opcodes - let&rsquo;s rewrite the area program using opcodes and register variables instead of operators, local variables, and constants.</p>
<pre tabindex="0"><code>#!parrot
# example-02-07.pir
.sub main :main
    set $N0, 3.14159
    set $N1, 10

    print &#34;Radius is &#34;
    say $N1

    # Calculate the area.
    set $N2, $N0
    mul $N2, $N1
    mul $N2, $N1
    print &#34;Area is &#34;
    say $N2
.end
</code></pre><p>Actually, this isn&rsquo;t all that hard to read. Still, the operators are more familiar to me and I&rsquo;m more comfortable with variables that have names. I&rsquo;ll continue using them. Parrot doesn&rsquo;t care.</p>
<p>Let&rsquo;s have a little fun and add interaction to our original area calculator.</p>
<pre tabindex="0"><code>#!parrot
# example-02-08.pir
.sub main :main
    .const num PI = 3.1415926
    .const string PROMPT = &#34;Radius: &#34;

    .local num radius
    .local num area
    .local pmc stdin

    stdin = getstdin
    radius = stdin.&#39;readline_interactive&#39;(PROMPT)
    area = PI
    area *= radius
    area *= radius
    print &#34;Area: &#34;
    say area
.end
</code></pre><p>For some reason, adding user interaction always makes a program seem more entertaining to me. Even a silly program that figures out something you could use a calculator for.</p>
<pre tabindex="0"><code>$ parrot example-02-08.pir
Radius: 10
Area: 314.15926
</code></pre><h4 id="type-conversion">Type Conversion</h4>
<p>I&rsquo;m not sure if you noticed, but I didn&rsquo;t bother converting the user input to a number before assigning it to <code>radius</code>. Oh, you noticed? You get a gold star.</p>
<p>The <code>=</code> operator takes care of such conversions automatically, allowing you to do things like get a string of input text from the user and treat it as the radius of a circle without having an intermediate step of using a temporary string variable to hold the user input. Actually, the more I think about what it would take to convert a string to an integer or floating point number, the happier I am that Parrot does it for me. PIR isn&rsquo;t exactly a <a href="https://en.wikipedia.org/wiki/Low-level_programming_language">low level language</a>, even though it is lower than what I&rsquo;m used to.</p>
<h4 id="opcodes-for-integers">Opcodes For Integers</h4>
<p>I won&rsquo;t be playing with them much today, but I thought you should know that there are many <a href="https://docs.parrot.org/parrot/latest/html/src/ops/math.ops.html">math-related</a> opcodes.</p>
<h4 id="hypotenuse-finder">Hypotenuse Finder</h4>
<p>Here&rsquo;s a little program to find the hypotenuse of a triangle. Maybe you remember the <a href="https://en.wikipedia.org/wiki/Pythagorean_theorem">Pythagorean theorem</a> from school:</p>
<blockquote>
<p>In any right triangle, the area of the square whose side is the hypotenuse (the side opposite the right angle) is equal to the sum of the areas of the squares whose sides are the two legs (the two sides that meet at a right angle).</p>
</blockquote>
<p>The formula looks like this:</p>
<blockquote>
<p>c² = a² + b²</p>
</blockquote>
<p>Calculating the hypotenuse is easy once we notice that there is a <code>sqrt</code> opcode for finding the square root of a number.</p>
<pre tabindex="0"><code>#!parrot
# example-02-09.pir
.sub main :main
    .local num a
    .local num b
    .local num c
    .local num a_squared
    .local num b_squared
    .local num c_squared
    .local pmc stdin

    stdin = getstdin
    a = stdin.&#39;readline_interactive&#39;(&#39;A: &#39;)
    b = stdin.&#39;readline_interactive&#39;(&#39;B: &#39;)
    a_squared = a * a
    b_squared = b * b
    c_squared = a_squared + b_squared
    c = sqrt c_squared
    print &#34;Hypotenuse: &#34;
    say c
.end
</code></pre><p>Don&rsquo;t look at me like that. Using a letter for a variable name makes perfect sense if you&rsquo;re writing code that follows a well-established formula.</p>
<p>I did have to add specific variables to hold the squared values, because as far as I can tell PIR does not support chained math operations. On the other hand, I did get to save a lot of effort with the <code>sqrt</code> opcode. I didn&rsquo;t even have to import a library.</p>
<pre tabindex="0"><code>$ parrot example-02-09.pir
A: 1
B: 1
Hypotenuse: 1.4142135623731
</code></pre><p>We&rsquo;ve learned a lot about how math works in Parrot. We&rsquo;ve seen some operators and even looked at the math opcodes. Okay, a few. Okay, one. At least it&rsquo;s a start.</p>
<p>Let&rsquo;s move on from numbers to take a closer look at strings.</p>
<h3 id="strings">Strings</h3>
<p>We have been using <a href="http://en.wikipedia.org/wiki/String_%28computer_science%29">strings</a> since the first step, but I haven&rsquo;t spent much time describing them. That is because I have found them a little hard to explain. I can&rsquo;t stall any longer, though.</p>
<h4 id="basics">Basics</h4>
<p>A string is basically a sequence of characters tied together and treated like a single thing. There is <a href="http://en.wikipedia.org/wiki/String_%28computer_science%29">a <em>lot</em> more</a> to strings.</p>
<p>Let&rsquo;s take the string &ldquo;Hello&rdquo;. I see that as a word, but of course the computer doesn&rsquo;t understand words the way we do. The computer sees a chain of symbols: &ldquo;H&rdquo;, &ldquo;e&rdquo;, &ldquo;l&rdquo;, &ldquo;l&rdquo;, and &ldquo;o&rdquo;. Really, it doesn&rsquo;t even see that. It sees a chain of integers that can be displayed as the phrase &ldquo;Hello&rdquo;.</p>
<p>You know what? It doesn&rsquo;t really matter. Remember that strings are basically text, but the fact that they aren&rsquo;t really text means we treat them in all sorts of strange ways later. We don&rsquo;t need to worry about those strange treatments today. It&rsquo;s fine to say that a string is quoted text.</p>
<p>There are three ways to wrap your strings when assigning them:</p>
<ul>
<li>single quotes</li>
<li>double quotes</li>
<li>heredocs</li>
</ul>
<p>Single-quoted strings are simple. Parrot assumes they are <a href="http://en.wikipedia.org/wiki/ASCII">ASCII encoded</a>, and very little magic happens when processing them.</p>
<pre tabindex="0"><code>#!parrot
$S0 = &#39;Hello World!&#39;
</code></pre><p>Double-quoted strings are a little more complex. Parrot assumes they are ASCII, but allows you to set the encoding yourself. Double-quoted strings also handle several backslash escapes. Encoding is easy in Parrot but I&rsquo;m having a heck of a time getting Unicode to display on my machines, so I&rsquo;ll skip encoding. I will talk about escapes in a few minutes.</p>
<pre tabindex="0"><code>#!parrot
$S1 = &#34;Hello World!\n&#34;
</code></pre><p>Heredocs are multi-line, which is a great convenience for larger strings. They can act like single-quoted strings or double-quoted strings, depending on the way they are created.</p>
<pre tabindex="0"><code>#!parrot
  $S2 =&lt;&lt;&#34;EndS2&#34;
Hello, World!
Isn&#39;t it a lovely day?
EndS2
</code></pre><p>If you like, we can whip up some quick code to show these string quoting methods in action.</p>
<pre tabindex="0"><code>#!parrot
# example-02-10.pir
.sub main :main
    $S0 = &#39;Hello World!&#39;
    $S1 = &#34;Hello World!\n&#34;
    $S2 =&lt;&lt;&#34;EndS2&#34;
Hello, World!
Isn&#39;t it a lovely day?
EndS2

    say $S0
    say $S1
    say $S2
.end
</code></pre><p>I don&rsquo;t think there are any surprises in this code.</p>
<pre tabindex="0"><code>$ parrot example-02-10.pir
Hello World!
Hello World!

Hello, World!
Isn&#39;t it a lovely day?
</code></pre><p>So that&rsquo;s the basics of quoting. Now what about escapes?</p>
<h4 id="backslash-escapes">Backslash Escapes</h4>
<p>Backslash escapes make it possible for you to include normally unprintable characters in a string. For example, they allow tabs and quotation marks to be part of your string:</p>
<pre tabindex="0"><code>#!parrot
# example-02-11.pir
.sub main :main
    $S0 = &#34;Question:\tAren&#39;t you sick of \&#34;Hello World\&#34;?\n&#34;
    print $S0
.end
</code></pre><p>See?</p>
<pre tabindex="0"><code>$ parrot example-02-11.pir
Question:  Aren&#39;t you sick of &#34;Hello World&#34;?
</code></pre><p>Here are my favorite backslash escapes:</p>
<table>
<thead>
<tr>
<th>Escape</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\t</code></td>
<td>Inserts a tab</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>Inserts a newline</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>Inserts a backslash</td>
</tr>
<tr>
<td><code>\&quot;</code></td>
<td>Inserts a double quote in double-quoted strings</td>
</tr>
<tr>
<td><code>\'</code></td>
<td>Inserts a single quote in single-quoted strings</td>
</tr>
<tr>
<td><code>\a</code></td>
<td>Rings an alarm</td>
</tr>
<tr>
<td><code>\xhh</code></td>
<td>Inserts character corresponding to the 2 byte hexadecimal value indicated by <code>hh</code></td>
</tr>
<tr>
<td><code>\uhhhh</code></td>
<td>Inserts character corresponding to the 4 byte hexadecimal value indicated by <code>hhhh</code></td>
</tr>
</tbody>
</table>
<p>There are more escape sequences, but I tend to ignore them.</p>
<p>Single quoted strings only escape <code>\\</code> and <code>\'</code>. Everything else is passed through unchanged.</p>
<h4 id="string-operators">String Operators</h4>
<p>We&rsquo;ve already worked with the major string operators, but here they are to review.</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Opcode</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>=</code></td>
<td><code>set</code></td>
<td>assign a value</td>
</tr>
<tr>
<td><code>.</code></td>
<td><code>concat</code></td>
<td>concatenate two strings</td>
</tr>
<tr>
<td><code>.=</code></td>
<td><code>concat</code></td>
<td>concatenate and assign</td>
</tr>
</tbody>
</table>
<h4 id="opcodes-for-strings">Opcodes For Strings</h4>
<p>You will almost definitely want to explore the <a href="http://docs.parrot.org/parrot/latest/html/src/ops/string.ops.html">string opcodes</a>.</p>
<h4 id="playing-with-string">Playing With String</h4>
<p>We have already been doing some interesting things with strings. Well <em>I</em> think getting user input and converting it to numbers is interesting. The opcodes open up the possibilities for some more interesting statistics and transformations.</p>
<pre tabindex="0"><code>#!parrot
# example-02-12.pir
.sub main :main
    .const string PROMPT = &#34;Enter some text: &#34;
    .local string text
    .local int    text_length
    .local string transformed
    .local pmc    stdin

    stdin = getstdin
    text = stdin.&#39;readline_interactive&#39;(PROMPT)
    print &#34;Number of characters: &#34;
    text_length = length text
    say text_length
    print &#34;Uppercase: &#34;
    transformed = upcase text
    say transformed
    print &#34;Lowercase: &#34;
    transformed = downcase text
    say transformed
    print &#34;Title case: &#34;
    transformed = titlecase text
    say transformed
.end
</code></pre><p>Granted, it doesn&rsquo;t do a whole lot.</p>
<pre tabindex="0"><code>$ parrot example-02-12.pir
Enter some text: BRian
Number of characters: 5
Uppercase: BRIAN
Lowercase: brian
Title case: Brian
</code></pre><p>Still, I think this shows that there is good reason to study those <a href="http://docs.parrot.org/parrot/latest/html/src/ops/string.ops.html">string opcodes</a>.</p>
<h3 id="pmcs">PMCs</h3>
<p>Uh, no. I&rsquo;m not ready to describe polymorphic containers yet. You&rsquo;ve already been using a PMC to get user input, and that&rsquo;s quite complex enough for the moment. Eventually we&rsquo;ll explore the <a href="http://docs.parrot.org/parrot/latest/html/pmc.html">PMCs</a> - what&rsquo;s already available, how to use them, and how to define our own. Right now we&rsquo;re just getting into the basics of how to make code run. As always, I encourage you to strike out on your own and explore the Parrot documentation if you want to get ahead of what I&rsquo;ve covered. I won&rsquo;t be offended. I&rsquo;ll be quite pleased, in fact.</p>
<h2 id="summary">Summary</h2>
<p>We got the basics of variable handling and simple types out of the way. Thank goodness. Types can be confusing, but now you know about integers, floating point numbers, and strings. You understand the differences between them. You know how you would use them in your own programs. If you use the opcodes available, you can get an incredible amount of power in your Parrot programs. But so far, Parrot is nothing more than an awkward calculator for you. You will want to look at labels and branching statements to start getting something interesting out of Parrot.</p>

  




  <section class="backlinks">
    <h2>Backlinks</h2>
    <nav>
      <ul>
      
      <li>
        <a href="/post/2009/09/parrot-babysteps-04-adding-command-line-arguments/">parrot-babysteps-04-adding-command-line-arguments</a>
      </li>
      
      </ul>
    </nav>
  </section>



  <hr>
  

  
  
<hr>
<div class="footer">
    
      <p>Series: <a href="/series/parrot-babysteps">Parrot Babysteps</a></p>
    
    
      <a class="previous-post" href="https://randomgeekery.org/post/2009/07/parrot-babysteps/?ref=footer">
        <span style="font-weight:bold;">« Previous</span>
        <br>Parrot Babysteps
      </a>
    
    
      <div class="next-post">
        <a href="https://randomgeekery.org/post/2009/07/parrot-babysteps-01-getting-started/?ref=footer">
          <span style="font-weight:bold;">Next »</span>
          <br>Parrot Babysteps 01 - Getting Started
        </a>
      </div>
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#variable-names">Variable Names</a>
      <ul>
        <li><a href="#register-variable-names">Register Variable Names</a></li>
        <li><a href="#local-variable-names"><code>.local</code> Variable Names</a></li>
      </ul>
    </li>
    <li><a href="#const-variables"><code>.const</code> Variables</a></li>
    <li><a href="#variable-types">Variable Types</a>
      <ul>
        <li><a href="#numeric-types">Numeric Types</a></li>
        <li><a href="#strings">Strings</a></li>
        <li><a href="#pmcs">PMCs</a></li>
      </ul>
    </li>
    <li><a href="#summary">Summary</a></li>
  </ul>
</nav>
    </div>
</div>

  

        </div><script defer data-domain="randomgeekery.org" src="https://plausible.io/js/script.js"></script>
    </body>
</html>
