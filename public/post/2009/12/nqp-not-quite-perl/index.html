<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
    










    







<script defer language="javascript" type="text/javascript" src="/js/bundle.min.60856f0f2ed73fb3cd2820ee548c4698ffbc4d743736e852c0e27ce4f52dfd9c.js"></script>






    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    
    <link rel="icon" href=/favicon.png>

    
    





  





  
  
  

<meta property="og:url" content="https://randomgeekery.org/post/2009/12/nqp-not-quite-perl/">
<meta property="og:title" content="NQP - Not Quite Perl">
<meta name="twitter:title" content="NQP - Not Quite Perl">


  <meta name="twitter:site" content="@brianwisti">



  
    <meta name="twitter:description" content="Parrot is more than just PIR and PASM. I&rsquo;m not talking about the
ability to use languages like Rakudo written for the Parrot virtual
machine. I am also not talking about the ability to write your own language.
Both of those are quite nifty, of course. It is fair to say that those two
items are probably why you are experimenting with Parrot in the first place.
However, the Parrot distribution also ships with an extra language: NQP.">
    <meta property="og:description" content="Parrot is more than just PIR and PASM. I&rsquo;m not talking about the
ability to use languages like Rakudo written for the Parrot virtual
machine. I am also not talking about the ability to write your own language.
Both of those are quite nifty, of course. It is fair to say that those two
items are probably why you are experimenting with Parrot in the first place.
However, the Parrot distribution also ships with an extra language: NQP.">
  



<title itemprop="name">NQP - Not Quite Perl - Random Geekery</title>
<meta property="og:title" content=NQP&#32;-&#32;Not&#32;Quite&#32;Perl&#32;-&#32;Random&#32;Geekery />
<meta name="twitter:title" content=NQP&#32;-&#32;Not&#32;Quite&#32;Perl&#32;-&#32;Random&#32;Geekery />
<meta itemprop="name" content=NQP&#32;-&#32;Not&#32;Quite&#32;Perl&#32;-&#32;Random&#32;Geekery />
<meta name="application-name" content=NQP&#32;-&#32;Not&#32;Quite&#32;Perl&#32;-&#32;Random&#32;Geekery />
<meta property="og:site_name" content="Random Geekery" />


<meta name="description" content="" />
<meta itemprop="description" content="" />
<meta property="og:description" content="" />
<meta name="twitter:description" content="" />


<base href="https://randomgeekery.org/post/2009/12/nqp-not-quite-perl/" />
<link rel="canonical" href="https://randomgeekery.org/post/2009/12/nqp-not-quite-perl/" itemprop="url" />
<meta name="url" content="https://randomgeekery.org/post/2009/12/nqp-not-quite-perl/" />
<meta name="twitter:url" content="https://randomgeekery.org/post/2009/12/nqp-not-quite-perl/" />
<meta property="og:url" content="https://randomgeekery.org/post/2009/12/nqp-not-quite-perl/" />


<meta property="og:updated_time" content=9012-09-12T120:00:09-0800 />


<link rel="sitemap" type="application/xml" title="Sitemap" href='https://randomgeekery.org/sitemap.xml' />

  <link
      rel="alternate"
      type="application/rss+xml"
    
        href="/index.xml"
    
      title="Random Geekery"/>



<meta name="robots" content="index,follow" />
<meta name="googlebot" content="index,follow" />


<meta name="twitter:site" content="" />
<meta name="twitter:creator" content="" />
<meta property="fb:admins" content="" />


<meta name="apple-mobile-web-app-title" content="Random Geekery" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />






<meta name="generator" content="Hugo 0.121.2">


    
    

<link
    rel="stylesheet"
    href="/css/style.15361b4c24f30033251cd8947e34c41e754c9461dc117cab390ac04e365faec3.css"
    integrity="sha256-FTYbTCTzADMlHNiUfjTEHnVMlGHcEXyrOQrATjZfrsM=" 
    crossorigin="anonymous">


</head>

    <body class="">
        <div class="wrapper">
            <aside class="sidebar">
    <div class="container sidebar-sticky">
        <div class="light-dark" align="right">
    <button class="btn-light-dark" title="Toggle light/dark mode">
        <svg class="moon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M6 .278a.768.768 0 0 1 .08.858a7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277c.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316a.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71C0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"/>
        </svg>
        <svg class="sun" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16">
            <path fill="currentColor" d="M8 12a4 4 0 1 0 0-8a4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
        </svg>
    </button>
</div>

        <div class="sidebar-about">
    <h1 class="brand">
        
        
            <a href="https://randomgeekery.org">
                <h1>Random Geekery</h1>
            </a>
        
    </h1>
    <p class="lead">
    Collecting my attempts to improve at tech, art, and life
    </p>
</div>

        <nav>
    <ul class="sidebar-nav">
      
        <li class="bullet">
          <a href="/follow/">Follow</a>
        </li>
      
        <li class="bullet">
          <a href="/now/">Now</a>
        </li>
      
    </ul>
</nav>

        
  <div class="related">
    <div class="related-posts">
      <h3>Related</h3>
      <ul>
        
          <li><a href="/post/2009/12/parrot-babysteps-08-testing-with-testmore/">Parrot Babysteps 08 - Testing With Test::More</a></li>
        
          <li><a href="/post/2009/10/parrot-babysteps-07-writing-subroutines/">Parrot Babysteps 07 - Writing Subroutines</a></li>
        
          <li><a href="/post/2009/10/parrot-babysteps-06-files-and-hashes/">Parrot Babysteps 06 - Files and Hashes</a></li>
        
          <li><a href="/post/2009/09/parrot-babysteps-05-more-about-arrays/">Parrot Babysteps 05 - More About Arrays</a></li>
        
          <li><a href="/post/2009/09/perl-hacks-in-my-workspace/">Perl Hacks In My Workspace</a></li>
        
      </ul>
    </div>
  </div>



        
















        <p class="footnote">
powered by <a target="_blank" href="https://gohugo.io">Hugo</a> | themed with <a target="_blank" href="https://github.com/lukeorth/poison">poison</a>
    <br>
    &copy; 2024 Brian Wisti. All rights reserved.
</p>
<p class="footnote">
  This work is licensed under a
  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
    Creative Commons Attribution 4.0 International License
  </a>.
</p>

  </div>
</aside>

            <main class="content container">
                <div class="post">
  <nav class="masthead">
    <ul>
    
  
    
  
    
  

    <li><a href="https://randomgeekery.org/">Random Geekery</a></li>
  

    <li><a href="https://randomgeekery.org/post/">Posts</a></li>
  

    <li><a class="active" href="https://randomgeekery.org/post/2009/12/nqp-not-quite-perl/">NQP - Not Quite Perl</a></li>
</nav>



  <div class="info">
    <h1 class="post-title">
        <a href="https://randomgeekery.org/post/2009/12/nqp-not-quite-perl/">NQP - Not Quite Perl</a>
    </h1>
    
        <time datetime="2009-12-09T00:00:00-0800" class="post-date">
            December 9, 2009
        </time>
    
    
    <ul class="tags">
        
        <li class="tag-parrot">
            <a href="https://randomgeekery.org/tags/parrot">parrot</a>
        </li>
        
        <li class="tag-perl">
            <a href="https://randomgeekery.org/tags/perl">perl</a>
        </li>
        
        <li class="tag-coolnamehere">
            <a href="https://randomgeekery.org/tags/coolnamehere">coolnamehere</a>
        </li>
        
    </ul>
    
    
    
    
    
    
</div>

  <p><a href="/card/parrot/">Parrot</a> is more than just PIR and PASM. I&rsquo;m not talking about the
ability to use languages like <a href="http://rakudo.org">Rakudo</a> written for the Parrot virtual
machine. I am also not talking about the ability to write your own language.
Both of those are quite nifty, of course. It is fair to say that those two
items are probably why you are experimenting with Parrot in the first place.
However, the Parrot distribution also ships with an extra language: NQP.</p>
<p><a href="http://docs.parrot.org/parrot/latest/html/docs/book/pct/ch05_nqp.pod.html">NQP</a> - Not Quite Perl - is an implementation of a small subset of Perl 6 that
can be used as a higher level Parrot language than PIR. It is especially useful
in defining the grammars for your Parrot languages.</p>
<h2 id="getting-nqp">Getting NQP</h2>
<p>You already have NQP if you have a fresh installation of Parrot. You can
find directions for installing in <a href="/post/2009/07/parrot-babysteps-01-getting-started/">parrot-babysteps-01-getting-started</a> if
you do not yet have Parrot installed.</p>
<h2 id="example">Example</h2>
<p>Let&rsquo;s just do a brutally fast NQP example.</p>
<pre tabindex="0"><code>#!/usr/local/bin/parrot-nqp

my $name := get_input(&#34;What is your name?&#34;);
say(&#34;Hello $name&#34;);

my $valid_input := 0;

while ($valid_input == 0) {
    my $in_good_mood := get_input(&#34;Are you in a good mood?[y/n]&#34;);
    if ($in_good_mood eq &#34;y&#34;) {
        say(&#34;Glad to hear it! Must be all the Parrot hacking.&#34;);
        $valid_input := 1;
    } elsif ($in_good_mood eq &#34;n&#34;) {
        say(&#34;Oh, that&#39;s too bad. Try hacking on Parrot.&#34;);
        $valid_input := 1;
    } else {
        say(&#34;Sorry, I&#39;m not too bright. Please answer &#39;y&#39; or &#39;n&#39;.&#34;);
    }
}

sub get_input($prompt) {
    print(&#34;$prompt &#34;);
    my $name := Q:PIR{
        .local pmc stdin
        stdin = getstdin
        %r = stdin.&#39;readline_interactive&#39;()
    };

    return $name
}
</code></pre><p>We see that NQP variables look a little like Perl variables, and familiar
control structures like <code>if</code> and <code>while</code> are supported. Another bit of niftiness
is that inline PIR is supported.</p>
<pre tabindex="0"><code>$ parrot-nqp hello.nqp
What is your name? Brian
Hello Brian
Are you in a good mood?[y/n] waffles
Sorry, I&#39;m not too bright. Please answer &#39;y&#39; or &#39;n&#39;.
Are you in a good mood?[y/n] y
Glad to hear it! Must be all the Parrot hacking.
</code></pre><p>Mind you, NQP is not really great for casual scripting. It&rsquo;s intended to be
a higher level bootstrap language that makes it easier to define grammars.
I wouldn&rsquo;t go complaining to anybody that it&rsquo;s missing Feature X. Unless you
know how to implement it. Maybe. If you want Feature X, it might be better
to use Rakudo or implement it in your own Parrot language.</p>
<p>You could even use NQP to implement it. Is my logic circular enough for
you?</p>
<h2 id="learning-nqp">Learning NQP</h2>
<p>There is a good overview of NQP available at
<a href="http://en.wikibooks.org/wiki/Parrot_Virtual_Machine/Not_Quite_Perl">wikibooks</a>.</p>
  






  <hr>
  

  
  
<hr>
<div class="footer">
    
    
      <a class="previous-post" href="https://randomgeekery.org/post/2009/10/parrot-babysteps-07-writing-subroutines/?ref=footer">
        <span style="font-weight:bold;">« Previous</span>
        <br>Parrot Babysteps 07 - Writing Subroutines
      </a>
    
    
      <div class="next-post">
        <a href="https://randomgeekery.org/post/2009/12/parrot-babysteps-08-testing-with-testmore/?ref=footer">
          <span style="font-weight:bold;">Next »</span>
          <br>Parrot Babysteps 08 - Testing With Test::More
        </a>
      </div>
    
</div>

  
</div>
            </main>
            
  
    <div class="article-toc ">
    <div class="toc-wrapper">
      <h4 id="contents"></h4>
      <nav id="TableOfContents">
  <ul>
    <li><a href="#getting-nqp">Getting NQP</a></li>
    <li><a href="#example">Example</a></li>
    <li><a href="#learning-nqp">Learning NQP</a></li>
  </ul>
</nav>
    </div>
</div>

  

        </div><script defer data-domain="randomgeekery.org" src="https://plausible.io/js/script.js"></script>
    </body>
</html>
