<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>itunesonRandom Geekery</title>
    <link>https://randomgeekery.org/tags/itunes/</link>
    <description>
      Recent contentinitunes on Random Geekery
    </description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
      
      <lastBuildDate>Mon, 27 Jul 2015 00:00:00 -0700</lastBuildDate><atom:link href="https://randomgeekery.org/tags/itunes/index.xml" rel="self" type="application/rss+xml" /><item>
  <title>Post: iTunes to Rhythmbox</title>
  <link>https://randomgeekery.org/post/2015/07/itunes-to-rhythmbox/</link>
  <pubDate>Mon, 27 Jul 2015 00:00:00 -0700</pubDate>
  
  <guid>https://randomgeekery.org/post/2015/07/itunes-to-rhythmbox/</guid>
  <description>I nearly wrote a script that transfers my 2015-03-16-ruby-itunes-ratings-fun|iTunes ratings to Rhythmbox. Instead I used Edgar Salgado’s version of iTunesToRhythm.
See, I have been spending most of my time lately in GNOME 3 on openSUSE Linux. All of my music is copied over and loaded into Rhythmbox, but I wanted to continue my quest to rate all of my music. I spent roughly an hour starting my own solution before realizing that this was probably a solved problem.</description>
   <category>post</category> 
   <category>post</category> 
   <category>itunes</category>  <category>ruby</category>  <category>music</category>  <category>tools</category> 
  <content:encoded><![CDATA[<h2>I nearly wrote a script that transfers my iTunes ratings to Rhythmbox. Instead I used Edgar Salgado's version of iTunesToRhythm.
</h2><p>I nearly wrote a script that transfers my <a href="/post/2015/03/ruby-itunes-ratings-fun/">2015-03-16-ruby-itunes-ratings-fun|iTunes ratings</a> to <a href="https://wiki.gnome.org/Apps/Rhythmbox">Rhythmbox</a>. Instead I used Edgar Salgado’s version of <a href="https://github.com/esalgado/iTunesToRhythm">iTunesToRhythm</a>.</p>
<p>See, I have been spending most of my time lately in <a href="https://www.gnome.org/gnome-3/">GNOME 3</a> on <a href="https://www.opensuse.org">openSUSE</a> Linux. All of my music is copied over and loaded into <a href="https://wiki.gnome.org/Apps/Rhythmbox">Rhythmbox</a>, but I wanted to continue my quest to rate all of my music. I spent roughly an hour starting my own solution before realizing that this was probably a solved problem.</p>
<p>Salgado’s code is a fork of <a href="https://github.com/esanbock/ITunesToRhythm">another project</a>, but he won my heart because he wrote how to use his version.</p>
<pre tabindex="0"><code>$ git clone git@github.com:esalgado/iTunesToRhythm.git
$ cd iTunesToRhythm
$ python iTunesToRhythm.py -w ~/Sync/iTunes\ Music\ Library.xml \
  ~/.local/share/rhythmbox/rhythmdb.xml
</code></pre><p>Some things about the process annoyed me. For some strange reason, not every iTunes entry included a file location. I manually fixed those. More annoying: the iTunes XML showed roughly 7,000 tracks as rated even though the iTunes application showed over 10,000 as rated. I chose to live with that. It’s only 3,000 tracks that I need to rate again.</p>
<p><em>sigh</em></p>
<p>Hey, let’s make a pretty picture.</p>
<p><strong><code>graph-ratings.rb</code></strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;nokogiri&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;gruff&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="no">SOURCE</span> <span class="o">=</span> <span class="s2">&#34;/home/brian/.local/share/rhythmbox/rhythmdb.xml&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">rhythmdb</span> <span class="o">=</span> <span class="no">Nokogiri</span><span class="o">::</span><span class="no">XML</span> <span class="no">File</span><span class="o">.</span><span class="n">open</span> <span class="no">SOURCE</span>
</span></span><span class="line"><span class="cl"><span class="n">songs</span> <span class="o">=</span> <span class="n">rhythmdb</span><span class="o">.</span><span class="n">xpath</span> <span class="s2">&#34;/rhythmdb/entry[@type=&#39;song&#39;]&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">ratings</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Group the songs by rating.</span>
</span></span><span class="line"><span class="cl"><span class="n">songs</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">song</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="n">rating</span> <span class="o">=</span> <span class="n">song</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&#34;rating&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">to_i</span> <span class="o">||</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="n">total_time</span> <span class="o">=</span> <span class="n">song</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&#34;duration&#34;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">to_i</span> <span class="o">||</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">]</span> <span class="o">||=</span> <span class="p">{</span> <span class="ss">songs</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="ss">time</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">][</span><span class="ss">:songs</span><span class="o">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">][</span><span class="ss">:time</span><span class="o">]</span> <span class="o">+=</span> <span class="n">total_time</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Print it.</span>
</span></span><span class="line"><span class="cl"><span class="nb">puts</span> <span class="s1">&#39;Rating Songs Percent Duration&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ratings</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">rating</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="n">song_count</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">][</span><span class="ss">:songs</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="n">total_seconds</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">][</span><span class="ss">:time</span><span class="o">]</span> <span class="c1">#Rhythmbox uses seconds</span>
</span></span><span class="line"><span class="cl">  <span class="n">seconds</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">%</span> <span class="mi">60</span>
</span></span><span class="line"><span class="cl">  <span class="n">minutes</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_seconds</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span> <span class="o">%</span> <span class="mi">60</span>
</span></span><span class="line"><span class="cl">  <span class="n">hours</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_seconds</span> <span class="o">/</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span> <span class="o">%</span> <span class="mi">24</span>
</span></span><span class="line"><span class="cl">  <span class="n">days</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">/</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">percentage</span> <span class="o">=</span> <span class="n">song_count</span><span class="o">.</span><span class="n">to_f</span><span class="p">()</span> <span class="o">/</span> <span class="n">songs</span><span class="o">.</span><span class="n">count</span><span class="o">.</span><span class="n">to_f</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="o">.</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="n">duration</span> <span class="o">=</span> <span class="nb">format</span> <span class="s1">&#39;%02d:%02d:%02d:%02d&#39;</span><span class="p">,</span> <span class="n">days</span><span class="p">,</span> <span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span>
</span></span><span class="line"><span class="cl">  <span class="n">description</span> <span class="o">=</span> <span class="nb">format</span> <span class="s1">&#39;%6d %5d %6.1f%% %s&#39;</span><span class="p">,</span> <span class="n">rating</span><span class="p">,</span> <span class="n">song_count</span><span class="p">,</span> <span class="n">percentage</span><span class="p">,</span> <span class="n">duration</span>
</span></span><span class="line"><span class="cl">  <span class="nb">puts</span> <span class="n">description</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Graph it.</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">rating</span><span class="p">,</span> <span class="n">info</span><span class="o">|</span> <span class="o">[</span> <span class="n">rating</span><span class="p">,</span> <span class="o">[</span> <span class="n">info</span><span class="o">[</span><span class="ss">:songs</span><span class="o">]]]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">graph</span> <span class="o">=</span> <span class="no">Gruff</span><span class="o">::</span><span class="no">Pie</span><span class="o">.</span><span class="n">new</span>
</span></span><span class="line"><span class="cl"><span class="n">graph</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&#34;Songs Grouped By Rating&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ratings</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">rating</span><span class="o">|</span> <span class="n">graph</span><span class="o">.</span><span class="n">data</span> <span class="n">rating</span><span class="p">,</span> <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">][</span><span class="ss">:songs</span><span class="o">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">graph</span><span class="o">.</span><span class="n">write</span> <span class="s2">&#34;song-pie.png&#34;</span>
</span></span></code></pre></div><p>This calls for Nokogiri instead of <a href="https://github.com/bleything/plist">plist</a>, which gives me the opportunity to flex my amazing <a href="http://www.nokogiri.org/tutorials/searching_a_xml_html_document.html">XPath</a> skills. Nothing too complex. Thank goodness.</p>
<pre tabindex="0"><code>$ ruby graph-ratings.rb
Rating Songs Percent Duration
     0  8926   55.2% 24:13:00:24
     1   254    1.6% 00:19:49:30
     2   984    6.1% 02:21:42:54
     3  3932   24.3% 10:08:49:09
     4  1716   10.6% 04:10:50:01
     5   370    2.3% 00:23:16:01
</code></pre><p>How about that pretty picture?</p>
<p><img src="/post/2015/07/attachments/img/2015/july-rhythmbox-song-pie.png" alt="The song pie for July"/></p>
<p>I’ve made progress since March. It looks less like Pac Man now.</p>
]]></content:encoded>
</item>
<item>
  <title>Post: Ruby iTunes Ratings Fun</title>
  <link>https://randomgeekery.org/post/2015/03/ruby-itunes-ratings-fun/</link>
  <pubDate>Mon, 16 Mar 2015 00:00:00 -0700</pubDate>
  
  <guid>https://randomgeekery.org/post/2015/03/ruby-itunes-ratings-fun/</guid>
  <description>I use the plist and gruff gems to summarize my iTunes music ratings with Ruby
Introduction Earlier this year I did a fresh operating system install on my laptop. Part of that install involved moving all my music from an older machine. I moved the music, but not the iTunes details. My tastes changed over the years. Why not start with a fresh listen and fresh ratings for all?
A few months passed.</description>
   <category>post</category> 
   <category>post</category> 
   <category>ruby</category>  <category>itunes</category>  <category>graphing</category>  <category>music</category>  <category>programming</category> 
  <content:encoded><![CDATA[<h2>Using Ruby to summarize my iTunes music ratings</h2><p>I use the <a href="https://github.com/bleything/plist">plist</a> and <a href="https://github.com/topfunky/gruff">gruff</a> gems to summarize my iTunes music ratings with <a href="/card/ruby/">Ruby</a></p>
<h2 id="introduction">Introduction</h2>
<p>Earlier this year I did a fresh operating system install on my laptop. Part of that install involved moving all my music from an older machine. I moved the music, but not the iTunes details. My tastes changed over the years. Why not start with a fresh listen and fresh ratings for all?</p>
<p>A few months passed. How much progress have I made?</p>
<p>First off let me roll 1d100 and check the Random Language Chart. I rolled a 73, and that means I write this in Ruby.</p>
<p>I decided to look at the XML file that gets exported by iTunes whenever a library detail changes. <a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man5/plist.5.html">Property List XML</a> frustrates quickly if you attack it with naive XML parsing. Fortunately, Ben Bleything wrote a <a href="https://github.com/bleything/plist">plist</a> gem that simplifies the task in Ruby.</p>
<p>Since I like pretty pictures, I may as well use Geoffrey Grosenbach’s <a href="https://github.com/topfunky/gruff">gruff</a> to make a pretty pie chart.</p>
<pre tabindex="0"><code>$ ruby --version
ruby 2.2.0p0 (2014-12-25 revision 49005) [x86_64-darwin14]
$ gem install plist
$ gem install gruff
</code></pre><h2 id="here-it-is">Here It Is</h2>
<p>No big code explanation this time around. My last few attempts at that have gone stale in my drafts folder. Plus, I’m worn out. I <em>tried</em> the naive XML parsing thing, and it frustrated me quickly. Thank goodness for <a href="https://github.com/bleything/plist">plist</a>.</p>
<p><strong><code>graph-ratings.rb</code></strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;plist&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">require</span> <span class="s1">&#39;gruff&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="no">SOURCE</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;HOME&#39;</span><span class="o">]</span><span class="si">}</span><span class="s2">/Music/iTunes/iTunes Music Library.xml&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">plist</span> <span class="o">=</span> <span class="no">Plist</span><span class="o">.</span><span class="n">parse_xml</span> <span class="no">SOURCE</span>
</span></span><span class="line"><span class="cl"><span class="n">tracks</span> <span class="o">=</span> <span class="n">plist</span><span class="o">[</span><span class="s1">&#39;Tracks&#39;</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">songs</span> <span class="o">=</span> <span class="n">tracks</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">reject</span> <span class="k">do</span> <span class="o">|</span><span class="n">track</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="n">track</span><span class="o">[</span><span class="s1">&#39;Kind&#39;</span><span class="o">]</span> <span class="o">!~</span> <span class="sr">/audio file$/</span> <span class="o">||</span> <span class="n">track</span><span class="o">[</span><span class="s1">&#39;Genre&#39;</span><span class="o">]</span> <span class="o">==</span> <span class="s1">&#39;Podcast&#39;</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ratings</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Group the songs by rating.</span>
</span></span><span class="line"><span class="cl"><span class="n">songs</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">song</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="n">rating</span> <span class="o">=</span> <span class="n">song</span><span class="o">[</span><span class="s1">&#39;Rating&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="n">total_time</span> <span class="o">=</span> <span class="n">song</span><span class="o">[</span><span class="s1">&#39;Total Time&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">]</span> <span class="o">||=</span> <span class="p">{</span> <span class="ss">songs</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="ss">time</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">][</span><span class="ss">:songs</span><span class="o">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">  <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">][</span><span class="ss">:time</span><span class="o">]</span> <span class="o">+=</span> <span class="n">total_time</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Print it.</span>
</span></span><span class="line"><span class="cl"><span class="nb">puts</span> <span class="s1">&#39;Rating Songs Percent Duration&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ratings</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">rating</span><span class="o">|</span>
</span></span><span class="line"><span class="cl">  <span class="n">song_count</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">][</span><span class="ss">:songs</span><span class="o">]</span>
</span></span><span class="line"><span class="cl">  <span class="n">total_seconds</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">][</span><span class="ss">:time</span><span class="o">]</span> <span class="o">/</span> <span class="mi">1000</span><span class="o">.</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="n">seconds</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">%</span> <span class="mi">60</span>
</span></span><span class="line"><span class="cl">  <span class="n">minutes</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_seconds</span> <span class="o">/</span> <span class="mi">60</span><span class="p">)</span> <span class="o">%</span> <span class="mi">60</span>
</span></span><span class="line"><span class="cl">  <span class="n">hours</span> <span class="o">=</span> <span class="p">(</span><span class="n">total_seconds</span> <span class="o">/</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span> <span class="o">%</span> <span class="mi">24</span>
</span></span><span class="line"><span class="cl">  <span class="n">days</span> <span class="o">=</span> <span class="n">total_seconds</span> <span class="o">/</span> <span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="n">percentage</span> <span class="o">=</span> <span class="n">song_count</span><span class="o">.</span><span class="n">to_f</span><span class="p">()</span> <span class="o">/</span> <span class="n">songs</span><span class="o">.</span><span class="n">count</span><span class="o">.</span><span class="n">to_f</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="o">.</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl">  <span class="n">duration</span> <span class="o">=</span> <span class="nb">format</span> <span class="s1">&#39;%02d:%02d:%02d:%02d&#39;</span><span class="p">,</span> <span class="n">days</span><span class="p">,</span> <span class="n">hours</span><span class="p">,</span> <span class="n">minutes</span><span class="p">,</span> <span class="n">seconds</span>
</span></span><span class="line"><span class="cl">  <span class="n">description</span> <span class="o">=</span> <span class="nb">format</span> <span class="s1">&#39;%6d %5d %6.1f%% %s&#39;</span><span class="p">,</span> <span class="n">rating</span><span class="p">,</span> <span class="n">song_count</span><span class="p">,</span> <span class="n">percentage</span><span class="p">,</span> <span class="n">duration</span>
</span></span><span class="line"><span class="cl">  <span class="nb">puts</span> <span class="n">description</span>
</span></span><span class="line"><span class="cl"><span class="k">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Graph it.</span>
</span></span><span class="line"><span class="cl"><span class="n">data</span> <span class="o">=</span> <span class="n">ratings</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">rating</span><span class="p">,</span> <span class="n">info</span><span class="o">|</span> <span class="o">[</span> <span class="n">rating</span><span class="p">,</span> <span class="o">[</span> <span class="n">info</span><span class="o">[</span><span class="ss">:songs</span><span class="o">]]]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">graph</span> <span class="o">=</span> <span class="no">Gruff</span><span class="o">::</span><span class="no">Pie</span><span class="o">.</span><span class="n">new</span>
</span></span><span class="line"><span class="cl"><span class="n">graph</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&#34;Songs Grouped By Rating&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">ratings</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort</span><span class="o">.</span><span class="n">each</span> <span class="p">{</span> <span class="o">|</span><span class="n">rating</span><span class="o">|</span> <span class="n">graph</span><span class="o">.</span><span class="n">data</span> <span class="n">rating</span><span class="p">,</span> <span class="n">ratings</span><span class="o">[</span><span class="n">rating</span><span class="o">][</span><span class="ss">:songs</span><span class="o">]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">graph</span><span class="o">.</span><span class="n">write</span> <span class="s2">&#34;song-pie.png&#34;</span>
</span></span></code></pre></div><p>Running it shows me that I have more than a month of music to rate, and only if I can rate music in my sleep.</p>
<pre tabindex="0"><code>Rating Songs Percent Duration
     0 13907   83.0% 38:05:56:14
    20    60    0.4% 00:03:41:48
    40   179    1.1% 00:12:28:46
    60  1351    8.1% 03:16:21:32
    80   984    5.9% 02:14:57:47
   100   273    1.6% 00:17:44:35
</code></pre><p>It seems I still like most of the music I own at least a little bit. Many former favorites have drifted to the 60 rating (3 stars), though. Time does change tastes a little bit.</p>
<p>The graph. Let’s look at that pretty picture.</p>
<p><img src="/post/2015/03/attachments/img/2015/song-pie.png" alt="Ratings pie chart"/></p>
<p>Yes. I have much music listening ahead of me.</p>
]]></content:encoded>
</item>
</channel>
</rss>
